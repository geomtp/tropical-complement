\documentclass[a4paper,dvipdfmx,reqno,12pt]{amsart}
%\documentclass[a4paper,reqno,12pt]{amsart}%for arxiv
\synctex=1
%
%%%% packages
\usepackage[utf8]{inputenc}

\usepackage{mathtools,thmtools}
%\usepackage{pgf,pgfplots}
%\usepackage{tikz}
%\pgfplotsset{compat=1.15}
%\usetikzlibrary{arrows}
\usepackage{tikz-cd}%
%\usetikzlibrary{cd}
%\usetikzlibrary{calc}

\usepackage{graphicx,color}%for images
\usepackage{bm}%fonts
\usepackage{amsmath,amsthm,amstext,amsfonts,amsbsy}%
\usepackage{amssymb}
\usepackage{latexsym}%
%\usepackage{algpseudocode,algorithm}%
\usepackage{todonotes}%comments
\usepackage[margin=3cm]{geometry}
\usepackage{layout}
\usepackage[T1]{fontenc}%font encoding
\usepackage{physics}
\usepackage{braket}%after physics

% \usepackage{imakeidx}%before hyperref for pagebackref
\usepackage[pagebackref]{hyperref}
\usepackage[capitalize]{cleveref}
\hypersetup{
     colorlinks = true,
     citecolor  = blue,
     linkcolor  = blue, 
     urlcolor   = blue, 
}
%\usepackage{pxjahyper}%for hyperref in Japanese
\usepackage{bookmark}

\usepackage{fancyhdr}
\pagestyle{plain}
\setlength{\footskip}{30pt}

%%%%


%%%% theoremstyle

\theoremstyle{definition}
\newtheorem{theorem}{Theorem}[section]
\newtheorem*{theorem*}{Theorem}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{definition*}{Definition}
\newtheorem{example}[theorem]{Example}
\newtheorem*{example*}{Example}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem*{proposition*}{Proposition}
\newtheorem{note}[theorem]{Note}
\newtheorem*{note*}{Note}
\newtheorem{notice}[theorem]{Notice}
\newtheorem*{notice*}{Notice}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem*{lemma*}{Lemma}
\newtheorem{fact}[theorem]{Fact}
\newtheorem*{fact*}{Fact}
\newtheorem{question}[theorem]{Question}
\newtheorem*{question*}{Question}
\newtheorem{conjecture}[theorem]{Conjecture}
\newtheorem*{conjecture*}{Conjecture}
\newtheorem{notation}[theorem]{Notation}
\newtheorem*{notation*}{Notation}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem*{corollary*}{Corollary}
\newtheorem{remark}[theorem]{Remark}
\newtheorem*{remark*}{Remark}
\newtheorem{condition}[theorem]{Condition}
\newtheorem*{condition*}{Condition}
\newtheorem{convention}[theorem]{Convention}
\newtheorem*{convention*}{Convention}
\newtheorem{observation}[theorem]{Observation}
\newtheorem*{observation*}{Observation}
%%%% newcommand

%%%logic symbol
\newcommand{\deq}{\coloneqq}

\newcommand{\dbraket}[1]{\hspace{-1.5pt}\braket{\hspace{-2.2pt}\braket{#1}\hspace{-2.2pt}}}

\newcommand{\textcmd}[1]{\texttt{\symbol{"5C}#1}}

%%special sets
\newcommand{\emp}{\varnothing}%emptyset
\newcommand{\C}{\mathbb{C}}%complex number
\newcommand{\Ha}{\mathbb{H}}%quaternion
\newcommand{\F}{\mathbb{F}}%field
\newcommand{\R}{\mathbb{R}}%real number
\newcommand{\Q}{\mathbb{Q}}%rational number
\newcommand{\Z}{\mathbb{Z}}%integer
\newcommand{\N}{\mathbb{N}_{0}}%natural number
\newcommand{\Pj}{\mathbb{P}}%bold p
\newcommand{\vep}{\varepsilon}%varepsilon

%%%%

\newcommand{\mb}[1]{\mathbb{#1}}%blackboard bold (for math mode)
\newcommand{\mcal}[1]{\mathcal{#1}}%

\newcommand{\opn}[1]{\operatorname{#1}}
\newcommand{\catn}[1]{\mathbf{#1}}

\newcommand{\abk}[1]{\langle {#1} \rangle}%angle bracket 
\newcommand{\Abk}[1]{\left \langle {#1} \right \rangle}%angle bracket (auto sizing)
\newcommand{\dabk}[1]{\langle\! \langle {#1}\rangle \! \rangle}%double angle bracket
\newcommand{\Dabk}[1]{\left \langle \! \left \langle {#1} \right \rangle \! \right \rangle}%double angle bracket
\newcommand{\Sbk}[1]{\left[ {#1} ]\right }% square bracket [] (auto sizing)
\newcommand{\Cbk}[1]{\left \{ {#1}\right \}}% curly bracket {} (auto sizing)
\newcommand{\dcbk}[1]{\{\!\!\{ {#1}\}\!\!\}} % double curly bracket {{}} 
\newcommand{\Dcbk}[1]{\left \{\!\! \left \{ {#1} \right\} \!\!\right \}} % double curly bracket {{}} (auto sizing)
\newcommand{\Paren}[1]{\left ( {#1} \right )}%parenthesis () (auto sizing)
\newcommand{\dparen}[1]{(\!({#1})\!)}%double parenthesis
\newcommand{\xto}[1]{\xrightarrow{#1}}
\newcommand{\xgets}[1]{\xleftarrow{#1}}
\newcommand{\hookto}{\hookrightarrow}


%%%% 

% %%%% mathabx.sty (font) 
% \DeclareFontFamily{U}{matha}{\hyphenchar\font45}
% \DeclareFontShape{U}{matha}{m}{n}{
%       <5> <6> <7> <8> <9> <10> gen * matha
%       <10.95> matha10 <12> <14.4> <17.28> <20.74> <24.88> matha12
%       }{}
% \DeclareSymbolFont{matha}{U}{matha}{m}{n}

% \DeclareFontFamily{U}{mathb}{\hyphenchar\font45}
% \DeclareFontShape{U}{mathb}{m}{n}{
%       <5> <6> <7> <8> <9> <10> gen * mathb
%       <10.95> mathb10 <12> <14.4> <17.28> <20.74> <24.88> mathb12
%       }{}
% \DeclareSymbolFont{mathb}{U}{mathb}{m}{n}

% \DeclareFontFamily{U}{mathx}{\hyphenchar\font45}
% \DeclareFontShape{U}{mathx}{m}{n}{
%       <5> <6> <7> <8> <9> <10>
%       <10.95> <12> <14.4> <17.28> <20.74> <24.88>
%       mathx10
%       }{}
% \DeclareSymbolFont{mathx}{U}{mathx}{m}{n}

% %DeclareMathSymbol (from mathabx.sty)
% \DeclareMathSymbol{\bigboxslash}{\mathop}{mathx}{"FE}
% \DeclareMathSymbol{\bigboxtimes}{\mathop}{mathx}{"D2}
% %%%%

% %%%% MnSymbol.sty (font)
% \DeclareFontFamily{U}{MnSymbolC}{}
% \DeclareFontShape{U}{MnSymbolC}{m}{n}{
%   <-6> MnSymbolC5
%   <6-7> MnSymbolC6
%   <7-8> MnSymbolC7
%   <8-9> MnSymbolC8
%   <9-10> MnSymbolC9
%   <10-12> MnSymbolC10
%   <12-> MnSymbolC12}{}
% \DeclareFontShape{U}{MnSymbolC}{b}{n}{
%   <-6> MnSymbolA-Bold5
%   <6-7> MnSymbolC-Bold6
%   <7-8> MnSymbolC-Bold7
%   <8-9> MnSymbolC-Bold8
%   <9-10> MnSymbolC-Bold9
%   <10-12> MnSymbolC-Bold10
%   <12-> MnSymbolC-Bold12}{}

% \DeclareSymbolFont{MnSyC}{U}{MnSymbolC}{m}{n}

% %%%% DeclareMathSymbol (from MnSymbol.sty)

% \DeclareMathSymbol{\tplus}{\mathbin}{MnSyC}{43}
% \DeclareMathSymbol{\aplus}{\mathbin}{MnSyC}{190}

%%%% renewcommand




%%%% footnote

\newcommand{\myfootnote}[1]{\hspace{-5pt}\footnote{#1}}

\newcommand{\TB}{\mcal{T}_{B}}
\newcommand{\TBZ}{\mcal{T}_{\Z,B}}
\newcommand{\AffS}{{\mathop{\mcal{A}\!f\!\!f\!}\nolimits}}
\newcommand{\simto}{ 
\mathrel{\raisebox{0.13em}{${\sim}$}}
\kern -0.75em \mathrel{\raisebox{-0.11em}{${\scriptstyle \to}$}}  
}
%%%%  

%%%% 

\renewcommand*{\backrefalt}[4]{%
\ifcase #1 %
\or        [Cited on p.#2.]%
\else      [Cited on pp.#2.]%
\fi}

\DeclareMathOperator{\Pic}{Pic}
\DeclareMathOperator{\CDiv}{Div^{\infty}}
\DeclareMathOperator{\fuk}{fuk}
\DeclareMathOperator{\coh}{coh}
\DeclareMathOperator{\reg}{gen}
\DeclareMathOperator{\tform}{\Omega}
\DeclareMathOperator{\mform}{\mathcal{F}}
\newcommand{\PD}[1]{[#1]_{\mathrm{PD}}}

\crefname{equation}{}{}
\crefname{conjecture}{Conjecture}{Conjectures}

\usepackage{mathrsfs}
\usepackage{upgreek}
\numberwithin{equation}{section}
\title{The complement of tropical curves in moderate position on
tropical surfaces}
\author[Y. Tsutsui]{Yuki Tsutsui}
\address{Graduate School of Mathematical Sciences,
The University of Tokyo, 3-8-1 Komaba, Meguro-Ku,
Tokyo, 153-8914, Japan}
\email{tyuki@ms.u-tokyo.ac.jp}
%\date{\today}

\begin{document}

\maketitle

\begin{abstract}
% 1. de Medrano, Rinc\'on and Shaw defined 
% the Chern classes and the Todd classes on
% tropical manifolds as an extension
% of their theory of
% the Chern--Schwartz--Macpherson cycles on matroids.
% This makes it possible to define
% the Riemann--Roch number of tropical Cartier divisors
% on compact tropical manifolds.
% In this paper, we discuss a conjecture
% that the Riemann--Roch number
% $\opn{RR}(X;D)$ of
% a tropical submanifold $D$ of codimension $1$
% in moderate position on a compact tropical manifold
% $X$ is equal to the topological Euler characteristic of 
% the complement $X\setminus D$.
% In particular, we prove it and 
% its generalization when $X$ is a compact
% tropical surface admitting a Delzant face structure.

% 2. de Medrano, Rinc\'on and Shaw defined 
% the Chern classes and the Todd classes on
% tropical manifolds as an extension
% of their theory of
% the Chern--Schwartz--Macpherson cycles on matroids.
% This makes it possible to define
% the Riemann--Roch number
% of tropical Cartier divisors
% on compact tropical manifolds.
% If $D$ is a tropical submanifold of codimension 
% $1$ in a compact tropical surface $X$ admitting
% a Delzant face structure, then 
% the Riemann--Roch number $\opn{RR}(X,-D)$ is 
% equal to the Euler characteristic with compact support 
% of the complement $X\setminus D$ from their
% tropical analogs of adjunction formula and
% Noether formula.
% In this paper, we prove that 
% the Riemann--Roch number $\opn{RR}(X,D)$ is equal
% to the topological Euler characteristic of 
% $X\setminus D$
% when $D$ is in moderate position.

\end{abstract}
\section{Introduction}
\subsection{Background}
Thanks to the theory of the Chern classes of
matroids and tropical manifolds by 
de Medrano--Rinc\'on--Shaw
\cite{MR3999674,demedrano2023chern},
we can define the Todd class of tropical manifolds
naturally \cite[Conjecture 6.13]{demedrano2023chern}.
In particular, we can also define the Riemann--Roch
number $\opn{RR}(X;D)$ for any (sedentarity-0)
tropical Cartier divisor $D$ on
a compact (purely) $n$-dimensional tropical manifold $X$:
\begin{align}
\label{equation-intro-rr}
\opn{RR}(X;D)\deq 
\int_{X}\opn{ch}(\mathcal{L}(D))\opn{td}(X).
\end{align}
where $\mathcal{L}(D)$ is the 
tropical line bundle associated with $D$
, $\opn{ch}(\mathcal{L}(D))\deq 
\sum_{i=0}^{\infty}\frac{c_1(\mathcal{L}(D))^{i}}{i!}$
is the Chern character of $\mathcal{L}(D)$
and $\int_X$ is the trace map of $X$.
We can extend the Riemann--Roch number for
tropical cycles of codimension $1$
by Poincar\'e duality
(\cref{definition-rr-number}).
In algebraic geometry, the Riemann--Roch number
$\opn{RR}(X;D)$ of a given Cartier divisor $D$
on a smooth projective variety
corresponds to
the Euler characteristic of the sheaf cohomology
of the invertible sheaf 
assocaited with $D$ by the Hirzebruch--Riemann--Roch theorem
or the Grothendieck--Riemann--Roch theorem.

In tropical geometry, invertible sheaves,
paricularly the structure sheaf
on tropical manifolds
(e.g. \cite[\textsection 1]{MR3330789}) 
do not form sheaves of abelian groups.
Consequently, there is no a direct
analog of the Euler characteristic of 
the sheaf cohomology of 
tropical Cartier divisors now.
The tropical Riemann--Roch theorem for 
compact tropical curves was proved by 
both Gathmann--Kerber \cite{MR2377750}
and Mikhalkin--Zharkov \cite{MR2457739}
independently
as a generalization of the 
Riemann--Roch theorem for finite graphs
establised by Baker--Norine \cite{MR2355607}. 
The generalization of these results and
their derivatives have developed in works such as 
\cite{MR3046301,MR4251610,MR4229604,MR4444458,MR4512397}.

However, researchers have not yet established
the tropical Riemann--Roch
theorem for higher-dimensional
compact tropical manifolds
as a direct generalization of the tropical
Riemann--Roch theorem for compact tropical curves.
Regardless of the specifics, it seems that understanding
the tropical geometric meaning of $\opn{RR}(X;D)$ is 
important.
At least, there exists a common interpretation
for a geometric meaning of the Riemann--Roch number
$\opn{RR}(X;0)$ for the trival divisor.
In \cite[Conjecture 6.13]{demedrano2023chern},
de Medrano, Rinc\'on and Shaw conjectured
that $\opn{RR}(X;0)$ for a compact 
tropical manifold $X$ is equal to the 
topological Euler characteristic 
$\chi(X)$ of $X$, 
and they proved it when 
$X$ is a compact tropical surface admitting
a Delzant face structure \cite[Theorem 6.3]{demedrano2023chern}.
They also proved a sufficiently broad range of 
tropical surfaces admit Delzant face structures
\cite[Corollary 6.11]{demedrano2023chern}.
(The tropical Noether formula
was studied in \cite{shaw2015tropical} previously.
We also note that a study of the Noether
formula for tropical complexes of dimension $2$
in \cite{cartwright2015combinatorial}).
Many researchers expect that the topological Euler 
characteristic of compact tropical manifolds
should be an analog of that of the sheaf cohomology
of the structure sheaves on complete
smooth algebraic varieties.
In fact, the two are highly related 
via a good degeneration of algebraic varieties
\cite[Corollary 2]{MR3961331}.
Besides, the Conjecture 6.13 of 
\cite{demedrano2023chern} is true for 
compact integral affine manifolds
from Klingler's proof of Chern's conjecture for
special affine manifolds \cite{MR3665000}.

In this paper, we discuss
a geometrical meaning of $\opn{RR}(X;D)$
when $D$ is in several non-trivial cases.
We mainly consider it when $X$ is
a compact tropical surface, but we expect 
that there exists a generalization for
higher-dimensional compact tropical manifolds.

\subsection{Main results}

Firstly, we recall some elementary properties
of divisors on algebraic varieties. 
To clarify the similarities we wish to investigate,
we will recall them under strong conditions.

Let $D$ be a non-singular divisor on a non-singular
algebraic variety $X$, and a morphism  
$\iota\colon D\to X$ is the closed embedding.
Then, there exists the following exact sequence
of sheaves:
\begin{align}
     0\to \mathcal{O}_X(-D)\to 
\mathcal{O}_X\to \iota_*\mathcal{O}_D\to 0
\end{align}
From this, we get the following equation for the Euler
characteristic of the sheaf cohomology:
\begin{align}
\label{equation-anti-effective-divisor}
\chi(X;\mathcal{O}_X(-D))=\chi(X;\mathcal{O}_X)
-\chi(D;\mathcal{O}_D)
\end{align}
From \eqref{equation-anti-effective-divisor},
the conjecture below is very natural and 
seems to be believed among many researchers
before \cite{demedrano2023chern}, if
we mildly ignore a technical condition of 
tropical submanifolds \cite{demedrano2023chern} (see also
\cite[Definition 4.3]{shaw2015tropical}).

\begin{conjecture}[{Folklore?}]
\label{conjecture-rr-c-euler}
Let $X$ be a compact
(purely) $n$-dimensional tropical manifold and
$D$ a tropical submanifold of codimension $1$
on $X$ 
\cite[Definition 2.14]{demedrano2023chern}.
Then,
\begin{align}
\opn{RR}(X;-D)=
\chi_c (X\setminus D) (=\chi_c (X)-\chi_c(D))
\end{align}
where $\chi_c(X)$ is the Euler characteristic
with compact support of $X$.
\end{conjecture}

\begin{example}
If $\dim X=1$, then 
\cref{conjecture-rr-c-euler} is trivial.
Let $\dim X=2$ and $K_X$ the canonical cycle of
$X$ \cite[Definition 5.8]{MR2275625}.
The adjunction formula for tropical submanifold
of codimension $1$ on $X$
\cite[Theorem 6]{shaw2015tropical} gives
\begin{align}
\opn{RR}(X;-D)=\frac{(-D-K_X).(-D)}{2}+\opn{RR}(X;0)
=\chi(D)+\opn{RR}(X;0).
\end{align}
where $(-D-K_X).D$ is the intersection number of 
$-D-K_X$ and $D$ in the meaning of \cite{shaw2015tropical}.
Therefore, if $X$ admits a Delzant face structure 
\cref{conjecture-rr-c-euler} is true
by \cite[Theorem 6.3]{demedrano2023chern}.
(We will see the compatibility of different definition of
intersection numbers which is needed to prove it in 
\cref{proposition-cycle-chern}.)
\end{example}

The main conjecture of this paper is the following 
which gives
the geometric meaning of $\opn{RR}(X;D)$, i.e.,
the dual of $\opn{RR}(X;-D)$.

\begin{conjecture}
\label{conjecture-rr-euler}
Let $D$ be a tropical submanifold of codimension 
$1$ of a compact tropical manifold $X$
\cite[Definition 2.14]{demedrano2023chern}.
If $D$ is in \emph{moderate position}
(\cref{definition-permissible-position}) on $X$,
then 
\begin{align}
\opn{RR}(X;D)=\chi(X\setminus D).
\end{align}
\end{conjecture}
I believe that other researchers also expect
\cref{conjecture-rr-euler} as like
\cref{conjecture-rr-c-euler},
but \cref{conjecture-rr-euler} is more non-trivial than
\cref{conjecture-rr-c-euler}.
In fact, many tropical submanifolds are in moderate position,
but we can easily construct of tropical submanifolds
which are not in moderate position.

\begin{example}
\label{example-permissible-point}
Let $C$ be a compact tropical curve 
and $C_{\mathrm{reg}}$ the set of all
points whose valency are $2$.
A point $p$ on $C$ is in moderate position
if and only if $p\in C_{\mathrm{reg}}$.

From easy calculation, for any 
tropical submanifold $D$ of codimension $1$,i.e.,
finite subsets contained in $C_{\mathrm{reg}}$ 
satisfies
\begin{align}
\opn{RR}(C;D)=\sharp (\opn{supp}(D))+ \chi_{\opn{top}}(C)
=\chi_{\opn{top}}(C\setminus D).
\end{align}

Therefore, \cref{conjecture-rr-euler} is true
for $C$.
\end{example}
In \cref{example-TPn,remark-iass},
we will see other examples for evidence 
why it seems that \cref{conjecture-rr-euler}
is true.

One of interesting points of
\cref{conjecture-rr-euler} is that
it does \emph{not} seem that there is
no a direct evidence of \cref{conjecture-rr-euler}
derived from usual algebraic geometry.  
For instance, the complement of two points 
on a tropical elliptic curve
$\mathbb{R}/\mathbb{Z}$ is disconnected.
This feature is far from that of the analyfication of Zariski open subsets of
algebraic varieties.
(In fact, Mikhalkin defined
a tropical analog of the open subset of
a given polynomial as the complement of
the full graph \cite[\textsection 3.3]{MR2275625}
of a tropical polynomial in
\cite[Remark 3.5 and Example 3.6]{MR2275625}.)

Besides, it must be noted that
the rank of the cohomology 
$H^{\bullet}(X\setminus D;\mathbb{R})$ 
for a codimension-1 tropical submanifold
on a compact $n$-dimensional tropical manifold
may not behave like that of
the sheaf cohomology 
$\mathcal{O}_{\mathcal{X}}(\mathcal{D})$
for a Cartier divisor $\mathcal{D}$ 
on a complete algebraic variety unlike
$H^{\bullet}_c(X\setminus D;\mathbb{R})$.
Incidentally, the author arrived at
\cref{conjecture-rr-euler} as
a derivation from the study in
\cite{tsutsui2023graded}. 
We will see a relationship between 
this paper and \cite{tsutsui2023graded}
in \cref{remark-c-infinity-divisor}.

One of main theorem in this paper
is the following, and its proof is not difficult:
\begin{theorem}[{Main theorem}]
\label{theorem-rr-euler-surface}
Let $D$ be a tropical submanifold of codimension $1$
in moderate position on a compact tropical manifold
$X$. Then,
\begin{align}
\chi(X\setminus D)=\frac{(D-K_X). D}{2}+
\chi(X).
\end{align}
\end{theorem}
From \cite[Theorem 6.3]{demedrano2023chern}
and \cref{theorem-rr-euler-surface}, we get
the following corollary:
\begin{corollary}
\label{corollary-ds-euler-rr}
If $X$ is a compact tropical surface admitting 
a Delzant face structure, then
\cref{conjecture-rr-euler} is true.
\end{corollary}
From this point, 
we will consider an extension of both
\cref{conjecture-rr-c-euler,conjecture-rr-euler}.
We recall well-known properties in algebraic geometry again.
Let $X$ be a nonsingular projective varieties,
$D$ a monsingular divisor on $X$ and
$\iota\colon D\to X$ the inclusion of $D$.
For any divisor $D'$ on $X$, we have
the short exact sequence:
\begin{align}
0 \to \mathcal{O}_X(D'-D)\to \mathcal{O}_X(D')
\to \mathcal{O}_X(D')
\otimes_{\mathcal{O}_X} \iota_*\mathcal{O}_D \to 0. 
\end{align}
From the projection formula for locally free sheaves,
we get 
\begin{align}
\chi(X;\mathcal{O}_X(D')\otimes_{\mathcal{O}_X} \iota_*\mathcal{O}_D)
=\chi(X;\iota_*(\iota^{*}\mathcal{O}_X(D')\otimes_{\mathcal{O}_D} \mathcal{O}_D))
=\chi(D;\iota^{*}\mathcal{O}_X(D')).
\end{align}

If $D'$ is nonsingular and the intersection
$D'\cap D$ is an nonsingular effective divisor
on $D$, then
\begin{align}
\chi(D;\iota^{*}\mathcal{O}_X(D'))=\chi(D;\mathcal{O}_D(D'\cap D)).
\end{align}
It may seems that 
the assumption for a pair $(D,D')$ above is
too strict.

However, through the application of the theorem of
Bertini, we can select a pair $(D,D')$ of divisors 
satisfying the condition above 
and $D_0=D'-D$ for a given divisor $D_0$ on $X$.
For such a pair, the following equation holds:
\begin{align}
\chi(X;\mathcal{O}_X(D'-D))=
\chi(X;\mathcal{O}_X(D'))-
\chi(D;\mathcal{O}_D(D'\cap D)).
\end{align}
By combining the observation and \cref{conjecture-rr-euler}, 
we can also expect the following conjecture:
\begin{conjecture}
\label{conjecture-rr-bertini}
Let $X$ be a compact $n$-dimensional
tropical manifold. 
Let $D,D'$ be tropical submanifolds of codimension $1$
on $X$ or empty.
Asuume $D$ and $D'$ satisfy the following conditions:
\begin{enumerate}
\item $D'$ is in moderate position on $X$.
\item the restrction $D'|_{D}$ of $D'$ on $D$ is 
a tropical submanifold of $D$ such that its support is   
$D'\cap D$.
\item $D'\cap D$ is in moderate position on $D$.
\end{enumerate}
Then,
\begin{align}
\label{equation-rr-bertini}
\opn{RR}(X;D'-D)=\chi (X\setminus D')-
\chi(D\setminus (D'\cap D)).
\end{align}

\end{conjecture}

\begin{definition}
A pair $(D,D')$ of tropical submanifolds of codimension 
$1$ on a compact tropical manifold $X$ is 
\emph{in moderate position} if $(D,D')$ satisfies
the condition (1)-(3) in \cref{conjecture-rr-bertini}.
\end{definition}
In this paper, we won't discuss how many pairs of 
tropical submanifolds of codimension $1$ in moderate position,
but we expect there to be a sufficient number of them.

Instead, we will see that we can deduce
\cref{conjecture-rr-bertini} from 
\cref{conjecture-rr-euler} and 
a conjecture about the Todd class of tropical 
manifolds (\cref{conjecture-grr-divisor})
in \cref{proposition-euler-to-bertini}.
From this observation, we will
generalize \cref{theorem-rr-euler-surface}
to \cref{theorem-rr-bertini-surface}.
\begin{remark}
If both $D$ and $D'$ is empty, then
\cref{conjecture-rr-bertini} is equivalent to
\cite[Conjecture 6.13]{demedrano2023chern}.
\cref{conjecture-rr-bertini} is equivalent to
\cref{conjecture-rr-c-euler} when 
$D'$ is empty and $D$ is not.
\cref{conjecture-rr-euler} is 
equivalent to
\cref{conjecture-rr-c-euler} when 
$D$ is empty and $D'$ is not.
Therefore, we can consider 
\cref{conjecture-rr-bertini} as a generalization
of the three conjecture above.
Moreover, it is important that 
the RHS of \eqref{equation-rr-bertini} 
can be considered as a certain homological data.
This data also related with the study in 
\cite{tsutsui2023graded}, so we expect 
\cref{conjecture-rr-bertini} is highly related
with homological mirror symmetry.
\end{remark}

\subsection{Outline of this paper}
In \cref{section-on-rr-euler}, we mainly
discuss \cref{conjecture-rr-euler} and
give a proof of \cref{theorem-rr-euler-surface}.
In \cref{section-on-rr-bertini}, we mainly
discuss \cref{conjecture-rr-bertini,proposition-euler-to-bertini}.
We also give a generalization of
\cref{theorem-rr-euler-surface}.

\subsection*{Acknowledgement}
I would like to thank Kazushi Ueda for his advice
and encouragement. This work was partially supported 
by JSPS KAKENHI Grant Number JP21J14529 and JP21K18575.

\section{On \cref{conjecture-rr-euler}}
\label{section-on-rr-euler}
\subsection{Tropical manifolds}
In this subsection, we recall about 
the theory of tropical manifolds from
\cite{shaw2011tropical,MR3330789,mikhalkin2018tropical,MR4637248,demedrano2023chern}.
We also recall it from other references if necessary.
We mainly follow the sheaf theoretic approach of
tropical manifolds in \cite{MR4637248}.
For simplicity, we use 
便宜上、本論文でのトロピカル多様体の定義は
\cite[Definition 6.1]{gross2019sheaftheoretic}
を採用し、finite type に関する条件
(e.g. \cite[Definition 7.1.14]{mikhalkin2018tropical} や
\cite[Definition 2.3 (4)]{demedrano2023chern})
は課さないこととする。トロピカル多様体がコンパクト
なら finite type に関する条件は気にする必要はない。

\begin{notation}
本文書での
有理多面空間 $(X,\mathcal{O}_X^{\times})$ 
\cite[Definition 2.2]{MR4246795} の
次元$\dim X$とは、$X$の局所コンパクト Hausdorff 空間
の次元\cite[Chapter III. Definition 9.4]{MR842190}
のことであり、点 $x\in X$ に対して
$\dim_x X$ を $X$ の $x$ における局所次元と呼ぶ
\cite[Chapter III. Definition 9.10]{MR842190}。
有理多面空間の定義から $X$ が空ではなければ、
$\dim_x X$ は非負整数である。
有理多面空間
$(X,\mathcal{O}_X^{\times})$
が、純次元的(pure dimensional)
とは、任意の点 $x\in X$ に対して
$\dim X=\dim_x X$ であることをいう。
これらの定義は、
\cite[Definition 7.1.1]{mikhalkin2018tropical}
と整合的である。
\end{notation}

\begin{remark}
有理多面空間はパラコンパクトかつ局所可縮である。
特に、定数層のコホモロジーと
特異コホモロジーが同型である。
有理多面空間が
boundaryless もしくは
トロピカル多様体であるときは自明である。
一般の有理多面空間が局所可縮であることは、
$\mathbb{T}^{n}$ 内の凸多面体 $P$ が
局所可縮であることと、
$\mathbb{R}^{n}$ 内の コンパクト集合 $K$ が Euclid 
neighborhood retract であることと
$K$が局所可縮であることが同値であること、
Euclid neighborhood retract な距離空間は
absolute neighborhood retract であること、
そして Borsuk's pasting theorem から示される。
(\href{https://eudml.org/doc/212574}{EUDML | Über eine Klasse von lokal zusammenhängenden Räumen}
の p.226 で初めて示されたらしい。
)

もしくは、
$\mathbb{T}^{n}$ 内の有理多面集合 $P$ の指数写像
$\opn{exp}\colon \mathbb{T}^{n}\to 
\mathbb{R}^{n}_{\geq 0}$ の像が $\mathbb{R}^{n}$
内の subanalytic set であることと、
$\mathbb{R}^{n}$ 内の局所閉な
subanalytic set に三角形分割が存在すること
\cite{MR760983} からも
示すことができる。
なお、subamalytic set の三角形分割の
存在定理は、$o$-極小構造の理論によってより一般化されている。
(詳しくは、\cite[Theorem II]{MR1463945} などを見よ。)
\end{remark}

\cite{demedrano2023chern}に倣い、
有理多面空間 $(X,\mathcal{O}_X^{\times})$
全体を被覆するチャートの集まり
$\{(U_i,\psi_i)\}_{i\in I}$を
$(X,\mathcal{O}_X^{\times})$のアトラスと呼ぶこととする。
有理多面空間$(X,\mathcal{O}_X^{\times})$ が
\cite[Definition 6.1]{gross2019sheaftheoretic}
の意味でトロピカル多様体であるとき、各チャート
$\psi_i\colon U_i\to V_i(\subset \underline{\mathbb{R}}^{n_i})$
の$V_i$が$L_M\times \underline{\mathbb{R}}^{r_i}$の開集合
となるようなアトラス$\{(U_i,\psi_i)\}_{i\in I}$を
取ることができる。

\cite[Definition 2.14]{demedrano2023chern}
に倣い、本文における部分有理多面空間
(rational polyhedral subspace)
の定義を以下にしておく。


\begin{definition}

$(X,\mathcal{O}_X^{\times})$ を有理多面空間とし、
$Y$ を $X$ の部分空間とする。
有理多面空間 $(Y,\mathcal{O}_Y^{\times})$ が 
$(X,\mathcal{O}_X^{\times})$ の
部分有理多面空間であるとは、
任意の点 $x\in Y$ に対して、$x$ を含む
$X$ のチャート $\psi \colon U\to \underline{\mathbb{R}}^{n}$
が存在し、$Y$ への制限 
$\psi|_{U\cap Y}\colon U\cap Y \to \underline{\mathbb{R}}^{n}$
が $Y$ のチャートであることを言う。
\end{definition}

$(X,\mathcal{O}_X^{\times})$ を有理多面空間とし、
$(Y,\mathcal{O}_Y^{\times})$ を $Y=X$ かつ、
恒等写像 $\opn{id}\colon Y\to X$ が有理多面空間としての
射でありながら、$(Y,\mathcal{O}_Y^{\times})$ が
$(X,\mathcal{O}_X^{\times})$ の部分有理多面空間とは
ならない場合があることも注意せよ。(そのような例は
Frobenious 射のトロピカル幾何的類似によって構築できる。)
有理多面空間 $(X,\mathcal{O}_X^{\times})$ の局所多面的な
閉集合は自然と部分有理多面空間の構造を持つ。

$(X,\mathcal{O}_X^{\times})$ を有理多面空間
$(Y,\mathcal{O}_Y^{\times})$ を $X$ の
部分有理多面空間とする。
$\iota\colon Y \to X$ を包含写像としたとき、
各点 $x\in Y$ ごとに局所錐の包含射
$\iota_{*,x}\colon \opn{LC}_x Y\to \opn{LC}_x X$
が自然と誘導される。
(局所錐の定義は\cite[\textsection 2.2]{MR4637248}
を見よ。)

さらに、$(X,\mathcal{O}_X^{\times})$ と
$(Y,\mathcal{O}_Y^{\times})$ が
regular at infinity 
(\cite[\textsection 6.1]{MR4637248} と
\cite[Definition 1.2]{MR3330789} を見よ) 
であるとき、各点 $x$ の近傍の射はある射
$f_{x}\colon \opn{LC}_x Y\times 
\underline{\mathbb{R}}^{r_{\alpha}}
\to \opn{LC}_x X\times \underline{\mathbb{R}}^{r_{\alpha'}}$
の制限として得られる。
十分に小さい $x$
の開近傍において$\mathcal{O}_X^{\times}(U)$は、
$T_x X\times \underline{\mathbb{R}}^{r_{\alpha}}$
上の大域的な$\mathbb{Z}$-アフィン関数と全単射である。
(\cite[Example 2.1]{MR4637248} でも説明されているように、
大域的ではない局所$\mathbb{Z}$-アフィン関数も存在する。)
特に、$(X,\mathcal{O}_X^{\times})$が regular at infinity
ならば、座標変換は
extended integer affine map \cite[Definition 2.2]{demedrano2023chern}
となることがこれよりわかる。よって
$(X,\mathcal{O}_X^{\times})$ 
が\cite[Definition 6.1]{gross2019sheaftheoretic}の意味での
コンパクトトロピカル多様体であるとき、
\cite[Definition 2.3]{demedrano2023chern}
の意味でのトロピカル多様体の構造を与えるアトラスを持つ。



\begin{definition}[{\cite[Definition 2.14]{demedrano2023chern}}]
$X$をトロピカル多様体とする。
あるトロピカルサイクルの台 $Y$ が
$X$のトロピカル部分多様体とは、
$Y$が有理多面部分空間として
トロピカル多様体かつ、
任意の点$x\in Y$の
局所錐の包含射
$\iota_{*,x}\colon \opn{LC}_x Y\to 
\opn{LC}_x X$
がある台集合を同じとする loopless マトロイド
$M,N$ が与える Bergman 扇の包含写像
$i \colon L_M\to L_N$
と同型であるものをいう。
\end{definition}

トロピカルサイクルの台は、閉部分集合なので
トロピカル部分多様体は常に閉部分集合である。

\begin{remark}
\cite[Example 2.15]{demedrano2023chern}でも強調されているように、
トロピカル多様体の閉部分多面空間がトロピカル多様体だとしても
トロピカル部分多様体であるとは限らない。
例えば、
\cite[Example 2.21]{shaw2015tropical}
における $C$ は、 valent が $3$ のトロピカル曲線
であるが、$P$ の部分トロピカル多様体ではない。
実際にこの埋め込みは、台集合を同じとするマトロイドに対する
包含関係$L_M\subset L_N$に由来しない。
その他の例については、
\cite{MR2594592} や \cite{MR3339531}
などを参照せよ。


\end{remark}

$X$をトロピカル多様体のとし、
$\opn{sed}_X\colon 
X\to \mathbb{Z}$ を
$X$ 上の sedentarity 関数
\cite[Definition 7.2.6]{mikhalkin2018tropical}
とする。
(\cite[Definition 2.4]{demedrano2023chern}
もみよ。)
定義より、任意の点 $x\in X$ に対して
次の等式が成り立つ。
\begin{align}
\opn{sed}_X(x)+\dim \opn{LC}_x X=\dim_x X.
\end{align}
また $\opn{sed}_X$ は、
上半連続関数である。
特に次の集合たちは、
$X$の閉部分集合である
(上半連続関数の定義は例えば\cite[p.287]{MR463157}
を見よ)。
\begin{align}
X^{[\geq k]}\deq \{p\in X\mid \opn{sed}_X(p)\geq k\},
\quad 
X_{\infty}\deq X^{[\geq 1]}.
\end{align}
$X_{\infty}$ は、
$X$の境界(boundary)
と呼ばれ、
$\partial X$と書く場合がある。
($X$がトロピカルトーリック多様体のとき、
$X_{\infty}$が$X$の境界つき
位相多様体の境界となっていることと、
代数幾何におけるトーリック境界の
トロピカル類似になっていることに
由来していると思われる。)
さらに言えば、$\opn{sed}_X$ は
semiconstant な関数なので、




$Y$ を $X$ 
のトロピカル部分多様体とし、
任意の点$x\in Y$に対して

\begin{align}
\opn{codim}(Y/X)\deq \dim X -\dim Y,\quad 
\opn{codim}_x(Y/X)\deq \dim_x X -\dim_x Y
\end{align}
とおくと、次が成り立つ。
\begin{align}
\opn{sed}_X(x)-\opn{sed}_Y(x)=
\opn{codim}_x(Y/X)-\opn{codim}_0(\opn{LC}_x Y/\opn{LC}_xX),
\end{align}
\begin{align}
\opn{codim}_x(Y/X) \geq 
\opn{sed}_X(x)-\opn{sed}_Y(x)\geq 0.
\end{align}

とくに $\opn{codim}_x(Y/X)=1$
のときは、$\opn{sed}_X(x)-\opn{sed}_Y(x)=0$ または
$1$ である。さらに、
$\opn{sed}_X(x)-\opn{sed}_Y(x)=1$のとき、
$\dim \opn{LC}_x Y=\dim \opn{LC}_x X$
なので トロピカル部分多様体の定義より
$\opn{LC}_x Y\simeq \opn{LC}_x X$
となる。
任意の点 $x\in Y$ に対して、
$\opn{sed}_X(x)=\opn{sed}_Y(x)$ 
のとき、$Y$ を $X$ の sedentarity-0 な
トロピカル部分多様体と呼ぶ。 

点 $x\in X$ に対して
$\opn{lineal}(X,x)$ を$\opn{LC}_x X (\subset T_x X)$
の maximal lineality 空間とする。
(\cite[\textsection 2.1]{MR4246795} と
\cite[\textsection 3]{demedrano2023chern} を見よ。)



\begin{remark}
\cite[\textsection 5]{MR3041763}の意味での
錐的多面集合の lineality 空間
は、
\cite[\textsection 2.1]{MR4246795}の意味での
極大 lineality 空間と一致する。
一致することを見るには、錐的多面集合が常に扇構造を持つことを
みれば十分である。これは、
$\mathbb{R}^{n}$ 内の凸多面集合の三角形分割を与える証明と
ほぼ同様にして証明することができる。
まず、錐的多面集合$C$は幾つかの有理凸多面錐の有限和
$C=\bigcup_{i\in I}\sigma_i$として
得ることができる。また、各有理凸多面錐は強凸と仮定して
よい。
各 $\sigma_i$ に対して$\sigma_i$を面に持つ
完備扇 $\Sigma_i$ が存在する。
(これは隅広の同変コンパクト化定理
\cite[Theorem 3]{MR337963}をトーリック幾何に適用
することで求まる。)
この共細 $\bigwedge_{i\in I}\Sigma_i$が、
$C$の多面体的錐の扇構造を与える。
この論法はコンパクトな polyhedron の
単体分割と実質的に同じである。
(例えば\cite[Theorem 2.11]{MR665919}
を見よ。)
\end{remark}

\begin{definition}[{中庸な位置}]
\label{definition-permissible-position}
$X$をトロピカル多様体とし、$Y$を$X$
トロピカル部分多様体(tropical submanifold)とする。
$Y$ が \emph{中庸な位置(moderate position)}にあるとは、
任意の$x\in Y$に対して
\begin{align}
     \opn{lineal}(Y,x) \subsetneq
 \opn{lineal}(X,x)
\end{align}
となることである。
\end{definition}

\begin{example}
\begin{enumerate}
\item $Y$が$X$上の中庸な位置にあるとき、
$Y$は$\opn{lineal}(X,x)$
が自明となる点集合上には存在しない。
\item $Y\cap X_{\mathrm{reg}}$ は、
$X_{\mathrm{reg}}$ 上の中庸な位置にある。
特に $X$ が整アフィン多様体のとき、$Y$は
常に中庸な位置にある。
\end{enumerate}

\end{example}

\begin{remark}
$Y$が$X$の中庸な位置にあるとき
補集合 $X\setminus Y$ は、大抵 finite type の条件を
満たさない。
\end{remark}

\begin{proposition}
\label{proposition-divisor-poincare}
$X$ を連結かつコンパクトな整アフィン多様体とし、
$D$ を余次元$1$のトロピカル部分多様体とする。
このとき、\cref{conjecture-rr-c-euler}と
\cref{conjecture-rr-euler}は同値である。
\end{proposition}
\begin{proof}
定義より、$D$は常に$X$上の中庸な位置にある。
また、$\opn{td}(X)=1$なので、
\begin{align}
\opn{RR}(X;-D)=(-1)^{\dim X}\opn{RR}(X;D)
\end{align}
また、$X\setminus D$は位相多様体なので、Poincar\'e 双対性より
\begin{align}
\chi_c(X\setminus D)=(-1)^{\dim X}\chi(X\setminus D)
\end{align}
が成り立つ。
\end{proof}

\begin{corollary}
$X$ を連結かつコンパクトな整アフィン多様体とし、
$D$ を余次元$1$のトロピカル部分多様体とする。	
\end{corollary}

\begin{remark}[{Integral affine manifolds with singularities}]
\label{remark-iass}
\cref{conjecture-rr-euler}や
\cref{proposition-divisor-poincare}
は、特異点つき整アフィン多様体に対して一般化できる
と期待できる。
一般に (境界を持たない) 向き付け可能な
特異点つき整アフィン多様体は、
Calabi--Yau 多様体の類似物と考えられている。
コンパクト Calabi--Yau 多様体 $M$ の標準束
$K_M$ は自明なので
Serre 双対性を考えると$M$上の因子$D$に対して
\begin{align}
\label{equation-calabi-yau-euler}
\chi(M;\mathcal{O}_M(-D))=(-1)^{\dim M}
\chi(M;\mathcal{O}_{M}(D))
\end{align}
となる。
これまでの議論を踏まえると、
\cref{equation-calabi-yau-euler} は
整アフィン多様体の場合に示した
\cref{proposition-divisor-poincare} と類似した
性質であり、\cref{proposition-divisor-poincare}
の証明は $X\setminus D$ が位相多様体であることが
本質的であるため、
\cref{proposition-divisor-poincare}
は特異点つき整アフィン多様体に一般化できると
期待できる。
\end{remark}

\begin{example}[{トロピカル射影空間}]
\label{example-TPn}
$\mathbb{T}P^{n}$ をトロピカル射影空間とし、
$F$を$d\Delta_{n}$をNewton多面体とするトロピカル
多項式とする。トロピカル超曲面 
$V_{\mathbb{T}}(F)$ が滑らかとは、$F$ が定義する正則
多面体分割が、unimodularな三角形分割になることであった。
(例えば、\cite[\textsection 4.5]{MR3287221} を
参照。)
このとき、
$\mathbb{T}P^{n}\setminus
V_{\mathbb{T}}(F)$の各連結成分が$d\Delta_n$内の格子点集合と
全単射になっていることは有名である
(例えば、\cite[Proposition 3.1.6]{MR3287221})。各連結成分は、
$\mathbb{T}P^{n}$内の凸多面体であるため、位相空間的には
すべて可縮である。また、
トーリック多様体における Chern 類の表現と
CSM サイクルによる Chern 類の定義は整合的である
\cite[Proposition 13.1.2]{MR2810322}。
よって、Todd 類も同等のものとなる
(\cite[Theorem 13.1.6]{MR2810322} も参照)。よって、
$c_1(V_{\mathbb{T}}(F))=d\in H^{1,1}(\mathbb{T}P^{n};
\mathbb{Z})
\simeq \mathbb{Z}$であることから次の等式が得られる。
\begin{align}
\opn{RR}(\mathbb{T}P^{n};V_{\mathbb{T}}(F))=
\sharp d\Delta_n(\mathbb{Z})=
\chi(\mathbb{T}P^{n}\setminus
V_{\mathbb{T}}(F))
\end{align}
なお、同様にして次の等式も得られる。
\begin{align}
\opn{RR}(\mathbb{T}P^{n};-V_{\mathbb{T}}(F))=
(-1)^{n}\sharp \opn{int}(d\Delta_n(\mathbb{Z}))=
\chi_{c}(\mathbb{T}P^{n}\setminus
V_{\mathbb{T}}(F))   
\end{align}
二番目の等式は、
$\chi_{c}(\mathbb{T}P^{n}\setminus
V_{\mathbb{T}}(F))=1-\chi (V_{\mathbb{T}}(F))$
と$V_{\mathbb{T}}(F)$が、$(n-1)$次元球面
$S^{n-1}$ 
の$\sharp \opn{int}(d\Delta_n(\mathbb{Z}))$
個の wedge 和とホモトピー同値であることから従う。
\end{example}

\begin{proposition}
$X$ をトロピカル多様体とし、$Y$ を
$X$ の余次元 $1$
のトロピカル部分多様体とする。
$Y$ が中庸な位置にあるとき、
$Y$ は sedentarity-0 なトロピカル部分多様体である。
\end{proposition}
\begin{proof}
点 $x\in Y$ に対して
$\opn{sed}_X(x)-\opn{sed}_Y(x)=1$ ならば、
$\opn{LC}_xY\simeq \opn{LC}_x X$ なので
$Y$ が中庸な位置にあるとき、そのような点は
存在しない。
\end{proof}

証明には、
次のよく知られた命題を用いる。
\begin{proposition}[{Well-known}]


特に、階数 $2$ のループをもたないマトロイドが定義する
Bergman 扇は $\Gamma_n$ のいずれかと同型である。
\end{proposition}
\begin{proof}
$M$ を階数 $2$ のマトロイドとする。このとき、
Lattice of flats から単純マトロイド
$M'$ が定義される。Lattice of flats が同型ならば、
Bergman 扇の台としても同型となる。
階数 $2$ の連結な
単純マトロイドは、皆一様マトロイドである。
\end{proof}


トロピカル曲面上の各点の局所錐の構造は、
\cite[Corollary 2.4]{shaw2015tropical}
によって分類されている。
これを念頭に次の命題を解く。

\begin{proposition}
\label{proposition-self-intersection}
$S$をコンパクトトロピカル曲面とし、
$C$を$S$の部分トロピカル曲線とする。
$C$が中庸な位置にあるとき、次の等式が成り立つ。
\begin{align}
     C.C=\sharp (C_{\mathrm{sing}}\cap S_{\mathrm{reg}})
\end{align}
\end{proposition}
\begin{proof}
$C$が$S$上中庸な位置にあるとき、
$\dim \opn{lineal}(S,x)=1,2$ のみである。
$\dim \opn{lineal}(S,x)=2$ のとき、
$\opn{LC}_x C$ は、ある
$\{0,1,2\}$上の階数$2$
の単純マトロイドの
Bergman 扇の台と同型でなくてはならないので、
$\opn{val}_C(x)=2,3$ である。
次に、$\dim \opn{lineal}(S,x)=1$ のときを
考える。このとき、
$\dim \opn{lineal}(C,x)=0$である。
特に、$\opn{LC}_x C$ は、次数 $3$ 以上の木となる。
\cite[Corollary 2.4]{shaw2015tropical} 
より、
$x$の近傍は$\Gamma_m\times \mathbb{R}$の
$(m\geq 3)$の開集合の場合のみを考えればよい。

また$\opn{LC}_x C\cap \opn{lineal}(S,x)=\{0\}$である。
実際に、$\opn{LC}_x C\cap \opn{lineal}(S,x)\ne \{0\}$
ならば、$T_x C \cap \opn{LC}_x S$ は、
$\Gamma_m$と真の部分線形空間との交叉と $\mathbb{R}$
の直積となる。この凸包は $T_x C$ の全体を張らないこととなり
矛盾する。
同じ理由から、$T_x C\cap \opn{lineal}(S,x)=\{0\}$である。
このとき、$T_x C\cap \opn{LC}_x S\simeq \Gamma_m$
である。よって、バランス条件から
$\opn{LC}_x C\simeq \Gamma_m$ である。
$\opn{LC}_x C$ と $\opn{lineal}(S,x)$ はマトロイドの交叉
とみなせるので、\cite[Theorem 4.2]{MR3032930}
と随伴公式\cite[Theorem 4.11]{shaw2015tropical} より、
$C$ の自己交点数は次のように書かれる。
\begin{align}
C . C=&\opn{deg}(K_C)-K_S . C \\
=& \sum_{p\in C_{\mathrm{sing}}}(\opn{val}(p)-2)
- \sum_{p\in C_{\mathrm{sing}}\cap S_{\mathrm{sing}}}
(\opn{val}(p)-2) \\
=& \sharp (C_{\mathrm{sing}}\cap S_{\mathrm{reg}}).
\end{align}

\end{proof}



\begin{proof}[{Proof of \cref{theorem-rr-euler-surface}}]

$j\colon S\setminus C\to S$ を包含写像とし、
$a_S$ を $S$ から一点空間への連続写像とする。
このとき、次の等式が成り立つ。
\begin{align}
\chi(S\setminus C)=\chi(Ra_{S*}Rj_*\mathbb{Q}_{S\setminus C}) 
\end{align}
$C$が$S$上中庸な位置にあるとき、
\cref{proposition-self-intersection}
の証明で見た局所錐の構造の分類より、
\begin{align}
(Rj_*\mathbb{Q}_{S\setminus C})_x
\simeq
\begin{cases}
\mathbb{Q}[0], \text{ if } x\in S\setminus C, \\
\mathbb{Q}^3[0], \text{ if } x\in C_{\mathrm{sing}}
\cap S_{\mathrm{reg}}, \\
\mathbb{Q}^2[0], \text{ otherwise.}  
\end{cases}  
\end{align}
となっている。
とくに、$Rj_*\mathbb{Q}_{S\setminus C}\simeq
j_*\mathbb{Q}_{S\setminus C}$ である。
$j^{-1}j_*=\opn{id}$ なので、
\cite[Proposition 2.3.6 (v)]{MR1299726} より、
\begin{align}
0\to j_!\mathbb{Q}_{S\setminus C} 
\to j_* \mathbb{Q}_{S\setminus C}
\to (j_*\mathbb{Q}_{S\setminus C})_{C} \to 0
\end{align}
という層単完全列を持つ。
特に、
\begin{align}
\chi(S\setminus C)=
\chi_c(S\setminus C)+\chi((j_*\mathbb{Q}_{S\setminus C})|_C)
\end{align}
となる。
層の押し出しの定義より
$(j_*\mathbb{Q}_{S\setminus C})|_C$は、
$C_{\opn{reg}}$ 上では、$\mathbb{Q}^2$
を茎とする局所定数層である。
よって、同様の議論で
\begin{align}
\chi((j_*\mathbb{Q}_{S\setminus C})|_C)=
2\chi_c(C_{\mathrm{reg}})+
3\chi_c(C_{\mathrm{sing}}\cap S_{\mathrm{reg}})+
2\chi_c(C_{\mathrm{sing}}\cap S_{\mathrm{sing}})
\end{align}
と書かれるため、$\chi(S\setminus C)$
は次のように書くことができる。
\begin{align}
\label{equation-euler-calculus}
\chi(S\setminus C)&=
\chi_c(S\setminus C)+
3\chi_c(C_{\mathrm{sing}}
\cap S_{\mathrm{reg}})+
2\chi_c(C\setminus (C_{\mathrm{sing}}
\cap S_{\mathrm{reg}}))\\
&=\chi_c(S\setminus C)+2\chi_c(C)+
\chi_c(C_{\mathrm{sing}}
\cap S_{\mathrm{reg}}) \\
&=\chi(S)+C.C+\chi(C)
=\frac{C.(C-K_S)}{2}+\chi(S).
\end{align}
\end{proof}

\begin{proof}[{Proof of \cref{corollary-ds-euler-rr}}]
\cref{theorem-rr-euler-surface} と、
\cref{proposition-cycle-chern} より示される。
\end{proof}

\begin{remark}
\cref{theorem-rr-euler-surface} の
証明において、$S\setminus C$ の Euler 数を
計算するために、$Rj_*\mathbb{Q}_{S\setminus C}$
を定数層に分割して証明を行ったが、これは
Euler calculus と密接に関係している\cite{MR970076,MR1115569}。
Euler calculus は構成可能層の Euler 数を計算する
上で有効な考え方であり、
\cref{equation-euler-calculus} の右辺は、
コンパクト台 Euler 標数を符号付き測度の一種とみなし、
その上で次の$S$上の単関数を
積分していると解釈することができる。
\begin{align}
\chi(Rj_*\mathbb{Q}_{S\setminus C})(x)\deq \chi((Rj_*\mathbb{Q}_{S\setminus C})_x) 
\simeq \chi(\varinjlim_{U\ni x} H^{\bullet}((S\setminus C)
\cap U;\mathbb{Q}))   
\end{align}
この構成可能関数の $x\in S$ での値を
$Rj_*\mathbb{Q}_{S\setminus C}$
の局所 Euler--Poincar\'e 指数と呼ぶ。

Euler calculus はトロピカル多様体上の基本的な
構成可能層を調べる上でも有効な手段であり、
tropical Poincar\'e--Hopf の定理
\cite[Theorem 4.7]{MR4540954} の最初の等式は、
\cite[Remark 4.8]{MR4540954} でも強調されているように
トロピカル $p$-form のなす層の全複体 
$\Omega^{\bullet}_{\mathbb{Z},X}$ に対する Euler integration 
だと解釈できる。
解析多様体上の構成可能層の Euler 数が
付随する構成可能関数の Euler integration に
よって計算可能であることは、\cite[Theorem 9.7.1]{MR1299726}
などを見よ。より一般の場合の構成可能層については
\cite[Chapter 2]{MR2031639} などで解説されている。
\end{remark}
% \begin{example}
% $\opn{deg}(F)=d$, $\opn{deg}(G)=e$とする。
% \begin{align}
% (V(G)|_{V(F)})^{2}+K_{V(G)}.(V(G)|_{V(F)})
% =e^2d+(d-4)ed=e^2d+d^2e-4de
% \end{align}

% \end{example}

\begin{remark}
\label{remark-c-infinity-divisor}
ここでは、\cref{conjecture-rr-euler} と
\cite{tsutsui2023graded}との関係について少し述べる。
なお、ここに書かれている内容は
\cite{tsutsui2023graded}に大きく依存しており、
本論文の主定理の証明を理解するには不要なので飛ばしても
構わない。
イントロで説明したように、コンパクトトロピカル多様体 $X$
とその部分
$\chi_c(X\setminus D)=\chi(X)-\chi(D)$ は、
\cref{equation-anti-effective-divisor} の類似だと
考えられるため、\cref{conjecture-rr-c-euler} を予想することは
想像に難くない。
一方で、\cref{conjecture-rr-euler} を直接示唆する
代数幾何的な事実を (トーリック多様体などの特殊な場合を除いて)
筆者は知らない。
先行研究からわかるように
トロピカル多様体のトポロジーは Berkovich 空間と関係が
深いため、\cref{conjecture-rr-c-euler,conjecture-rr-euler}
は Berkovich 幾何とも深く関係していると期待されるが、
筆者は執筆時点ではよくわかっていない。
一方で、\cite{tsutsui2023graded} での研究を踏まえると
$H^{\bullet}(X\setminus D)$ は、Floer 複体との密接な関係が
あると期待でき、ミラー対称性を通じて
複素多様体上の直線束の Euler 数と関連付ける
ことができると期待できる。以下よりこれを例を用いて
軽く説明する。

簡単のために、$X$ を $\mathbb{R}/\mathbb{Z}$ とし、$D$ を有限個の
点集合とする。
このとき、次の次数つき加群としての同型が成り立つ:
\begin{align}
H^{\bullet}(X\setminus D;\mathbb{Z}) 
&\simeq \bigoplus_{E\in \pi_0(X\setminus D)} 
H^{\bullet}(E;\mathbb{Z})
\simeq \bigoplus_{E\in \pi_0(X\setminus D)} \mathbb{Z}[0], \\
H_c(X\setminus D;\mathbb{Z}) 
&\simeq \bigoplus_{E\in \pi_0(X\setminus D)} 
H^{\bullet}_c(E;\mathbb{Z})
\simeq \bigoplus_{E\in \pi_0(X\setminus D)} \mathbb{Z}[-1].
\end{align}

一方で、$D$ を台とする Cartier 因子
$s_D\in \opn{CDiv}(X)$ が存在し、
それは $D$の近傍のみ位数$1$で折れている
$\mathbb{Z}$-affine な関数を局所的に貼り合わせたものとなっており、
普遍被覆 $\pi\colon \mathbb{R}\to \mathbb{R}/\mathbb{Z}$ 
による引き戻し $\pi^{*}s_D$ は $\mathbb{R}$ 上の単調増加な
$\mathbb{Z}$-affine 関数 $f$ の主因子となっている。
当然であるが、$\opn{deg}(s_D)=\sharp D$ である。

筆者は \cite{tsutsui2023graded} にて、
ミラー対称性と超局所層理論のアイデアから代数多様体上の直線束の
Euler 数の類似を考察する上で次の手法を提案した。
$\mathcal{A}^{0,0}_X$ を $X$ 上の
$(0,0)$-superform のなす層
\cite{MR3903579} とすると、
次の層完全列が存在する。
\begin{align}
0\to \mathcal{O}_X^{\times} \to \mathcal{A}^{0,0}_X
\to \mathcal{A}^{0,0}_X/\mathcal{O}_X^{\times} \to 0
\end{align}

$\mathcal{A}^{0,0}_X$ は acyclic なので、
連結準同型
$H^{0}(X;\mathcal{A}^{0,0}_X/\mathcal{O}_X^{\times})
\to H^{1}(X;\mathcal{O}_X^{\times})$ は全射である。
Abel 群 
$\opn{Div}^{\infty}(X)\deq 
H^{0}(X;\mathcal{A}^{0,0}_X/\mathcal{O}_X^{\times})$
は、Cartier 因子のなす群の類似物である。
\cite{tsutsui2023graded} では、
$\opn{Div}^{\infty}(X)$の元を
$X$ 上の \emph{$C^{\infty}$-divisor} と呼んでいる。
$B$ が整アフィン多様体であるとき、$C^{\infty}$-因子から
Lagrange トーラス束 $\check{f}_B\colon \check{X}(B)\to B$
の Lagrange 切断を構築することができることから
$C^{\infty}$-因子は Lagrange 部分多様体の一種の派生と
見ることができる。
また、$\mathcal{L}$ を $D$ が定義する直線束とすると、
上述の連結準同型によって $\mathcal{L}$ に移る
$C^{\infty}$-因子を一つとることができる。
今回の場合は、上で定義した $s_D$ の折れているところを
適当な単調関数で滑らかに置き換えることで同じ
$H^{1}(X;\mathcal{O}_X^{\times})$ の元を与える
$C^{\infty}$-因子 $s_{\mathcal{L}}$ を得ることができる。
特に、$s_0\cap s_{\mathcal{L}}$が、$X\setminus D$ の中に
含まれ、任意の
$E\in\pi_0(X\setminus D)$ に対して
$(s_0\cap s_{\mathcal{L}})\cap E$ が一点 $p_{E}$ となるように
とることができる。このとき、$s_{\mathcal{L}}$ は、
\emph{permissible} な因子であり、
$\pi^{*}s_{\mathcal{L}}$は、strictly convex な
$C^{\infty}$-関数の
主因子となっている。
\cite{tsutsui2023graded}では、
コンパクトトロピカル多様体上の permissible な
$C^{\infty}$-因子 $s_{\mathcal{L}}$に対して、次数付き$\mathbb{Z}$加群
$\opn{LMD}^{\bullet}(X;s_{\mathcal{L}})$
を定義し、それが$s_{\mathcal{L}}$の因子類の
Riemann--Roch 数と等しいことを予想した
\cite[Conjecture 1.2]{tsutsui2023graded}。
(ただし、\cite[Conjecture 1.2]{tsutsui2023graded}
は、\cite{demedrano2023chern}が公開されるより前で
あったため Todd 類の明示的な定義はされていない。)
なお $X=\mathbb{R}/\mathbb{Z}$のとき、
$X$ は整アフィン多様体なので、
このとき、$s_{\mathcal{L}}$ が定義する次数付き加群
$\opn{LMD}^{\bullet}(X;s_{\mathcal{L}})$ は、
$s_{\mathcal{L}}$ が定義する Lagrangian 切断の
Floer 複体 \cite[Remark 13]{MR1882331} と
次数付き加群として同型であり、今回の場合は次のように
書くことができる
(より詳しくは\cite[\textsection 4.4]{tsutsui2023graded}
を見よ)。
\begin{align}
\opn{LMD}^{\bullet}(X;s_{\mathcal{L}}) &\simeq 
\bigoplus_{p_E\in s_0\cap s_{\mathcal{L}}}\mathbb{Z}[0]
\simeq H^{\bullet}(X\setminus D;\mathbb{Z}), \\
\opn{LMD}^{\bullet}(X;-s_{\mathcal{L}}) &\simeq
\bigoplus_{p_E\in s_0\cap s_{\mathcal{L}}}\mathbb{Z}[-1]
\simeq H^{\bullet}_c(X\setminus D;\mathbb{Z}).
\end{align}
これはただの偶然ではない。
実際に同様の論法が、$X$を
$\mathbb{Z}^{n}$内の top dimensional 格子多面体
$P$の射影的トロピカルトーリック多様体 $X_P$ に、
$D$ をトーリック幾何的な意味で豊富な因子$D_P$
と線形同値な因子を与える滑らかなトロピカル超曲面に
置き換えても似たような議論が成立し、その場合は
次のような同型を与える permissible な 
$C^{\infty}$-divisor 
$s_{P}$ が得られる:
\begin{align}
\opn{LMD}^{\bullet}(X_P;s_{P})
&\simeq \bigoplus_{p\in P\cap \mathbb{Z}^{n}}\mathbb{Z}[0]
\simeq \bigoplus_{W\in \pi_0(X_P\setminus D)}
H^{\bullet}(W;\mathbb{Z})\simeq 
H^{\bullet}(X_P\setminus D;\mathbb{Z}), \\
\opn{LMD}^{\bullet}(X_P;-s_{P})
&\simeq \bigoplus_{p\in \opn{int}(P)\cap \mathbb{Z}^{n}}
\mathbb{Z}[-\dim X_P]
\simeq \bigoplus_{W\in \pi_0(X_P\setminus D)}
H^{\bullet}_c(W;\mathbb{Z}) \\
&\simeq H^{\bullet}_c(X_P\setminus D;\mathbb{Z}).
\end{align}
$s_P$ については、\cite[Appendix D]{tsutsui2023graded}
にて実質的に説明している。
こういった対応は、
$H^{\bullet}(X\setminus D)$ に対して、
"Floer differential" が定義できるならば、
$H^{\bullet}(X\setminus D)$ から
$D$ のホモロジカルな不変量を取り出す
ことができる可能性も示唆している。
なお、この "Floer differential" の必要である根拠の一つは、
$X\setminus D$ の各連結成分が可縮である場合などの
特殊なケースを除いて $H^{\bullet}(X\setminus D)$
の階数が代数多様体上の
有効因子の層コホモロジーのように振舞わない点である。
(\cref{remark-complement-cohomology} も見よ。)
最後に、この Remark にて
言及したことと深い関係があることが示唆される話題の
一つに
Demazure's theorem \cite{MR284446} があることも
述べておく(\cite[\textsection 9.1]{MR2810322} も見よ)。
\end{remark}

\begin{remark}
\label{remark-complement-cohomology}
$C$ をコンパクトトロピカル曲線とし、$D$ を
$C\setminus C_{\mathrm{sing}}$ 内の有限個の点とする。
このとき、コンパクト台コホモロジー
$H_c^{\bullet}(C\setminus D)$ の階数と
$D$ の
Baker--Norine rank $r(D)$ には次のような関係がある。
\begin{align}
\opn{rank} H_c^{0}(C\setminus D)=r(D)+1=0, \quad
\opn{rank} H_c^{1}(C\setminus D)=r(K_C-D)+1.
\end{align}

Baker--Norine rank $r(D)$ は、代数幾何における因子の
線形系の階数の組み合わせ的類似であるため、上の等式は
$H_c^{\bullet}(C\setminus D)$ の階数が
代数多様体上の因子の層コホモロジーの階数の類似として
ふさわしい振る舞いをしていると考えることができる。

一方でイントロでも言及したように、
$H^{\bullet}(C\setminus D)$ は必ずしも
代数多様体上の因子の層コホモロジーの階数の類似として
振舞わない。

以降より、
$C$ を \cite[Figure 1]{MR2457739}
にあるような種数 $2$ のコンパクトトロピカル曲線とする。
$E$ と $C\setminus C_{\mathrm{sing}}$ の連結成分の
一つとして、$D$ を $E$ 上の空ではない有限個の点とする。
このとき、補集合の特異コホモロジーの回数は次のようになる。
\begin{align}
\label{equation-cohomology-behaviour}
\opn{rank} H^{0}(C\setminus D)=\sharp(D), \quad
\opn{rank} H^{1}(C\setminus D)=1.
\end{align}

一方で $\opn{deg}(K_C-D)=2-\sharp (D)$ なので、
$\sharp (D)>2$ のとき定義より、
\begin{align}
\label{equation-rank-behaviour}
r(D)+1=\sharp(D)-1,\quad r(K_C-D)+1=0.
\end{align}

つまり、このときは 
$\opn{rank} H^{0}(C\setminus D)>r(D)+1$ となっている。

$\opn{rank} H^{1}(C\setminus D)=1$ は、どんなに $D$
の次数が増えても変わらない。これは、因子に付随する
可逆層のコホモロジーの挙動とは異なる性質である。
これが、\cref{remark-c-infinity-divisor} にて言及した
$H^{\bullet}(C\setminus D)$ に対して ``Floer differential''
が必要なだと考える理由である。
% また、\eqref{equation-rank-behaviour} は
% $H^{\bullet}(C\setminus D)$ に対して
% そのような理想的な微分
% $\mathfrak{m}\colon H^{\bullet}(C\setminus D)
% \to H^{\bullet}(C\setminus D)[-1]$
% が定義でき、鎖複体 
% $(H^{\bullet}(C\setminus D),\mathfrak{m})$
% のコホモロジー
% $``\opn{HF}^{\bullet}(C;D)"$ が定義できたとしても 
% $\mathfrak{m}$ の定義によらず、次の不等式
% \begin{align}
% \opn{rank}``\opn{HF}^{0}(C;D)"< r(D)+1
% \end{align}
% が成り立っていることを意味する。
また、$H^{\bullet}(C\setminus D)$ に対する適切な微分は、
trivalent graph に対するホモロジー的ミラー対称性
\cite{auroux2022lagrangian} を参考にして
組み合わせ的に構成することが
できると期待でき、それが付値体上の代数曲線のモデルが定める
specialization map と何らかの意味で整合的であると期待すること
も不自然ではないと筆者は考える。
\end{remark}


\section{On \cref{conjecture-rr-bertini}}
\label{section-on-rr-bertini}
\cite{demedrano2023chern}
トロピカル多様体の Chern 類は、ベクトル束の
理論の直接的な類似として定義されていないため、
現時点では多くのことはわかっていない。
また、筆者はトロピカル多様体上の
\emph{tropical tangent bundle} の定義を知らない。
(なお、トロピカルベクトル束に関する研究や考察は
\cite{MR2961320,MR4646329}
や \cite[Theorem 1.8]{amini2020hodge}
などでなされている。)
一方で乗法列 \cite[\textsection 1]{MR1335917} の
定義および
形式的な議論のみで導出できる内容はうまくいく
部分がある。
ここでは Todd 類が持つべき性質
(\cref{conjecture-grr-divisor})
を仮定した場合に、
\cref{conjecture-rr-bertini} 
が\cite[Conjecture 6.13]{demedrano2023chern}
と\cref{conjecture-rr-euler} より
帰結されること
(\cref{proposition-euler-to-bertini})を見る。

\subsection{トロピカルホモロジー側の準備}

ここでは、トロピカル多様体上のトロピカルホモロジー論について、
必要な部分を \cite{MR3330789,MR3894860,MR4637248} から
復習する。なお、本論文では \cite{MR4637248} による
層理論的なトロピカルホモロジー論について中心的に
復習する。この節では、$Q$ を $\mathbb{R}$
の部分環とする。
有理多面空間 $(X,\mathcal{O}_X^{\times})$
と$p\in \mathbb{Z}$ に対して
$\Omega_{\mathbb{Z},X}^{p}$ を
tropical $p$-form のなす層とする
\cite[Definition 2.7]{MR4246795}。
(\cite{MR3330789,MR3961331} との比較のために 
\cite[Remark 2.8]{MR4637248} も見よ。)
有理多面空間 $(X,\mathcal{O}_X^{\times})$
と$p,q\in \mathbb{Z}$ に対して、
トロピカルコホモロジー $H^{p,q}(X;Q)$ と
トロピカル Borel--Moore ホモロジー
$H_{p,q}^{\mathrm{BM}}(X;Q)$ が次のように定義される
\cite[Definition 4.3]{MR4637248}:
\begin{align}
H^{p,q}(X;Q)&\deq \opn{Hom}_{D^{b}(\mathbb{Z}_X)}(
\mathbb{Z}_X,\Omega_{\mathbb{Z},X}^{p}[q])
\otimes_{\mathbb{Z}} Q, \\
H_{p,q}^{\mathrm{BM}}(X;Q)
&\deq \opn{Hom}_{D^{b}(\mathbb{Z}_X)}
(\Omega_{\mathbb{Z},X}^{p}[q],\upomega_{X}^{\bullet})
\otimes_{\mathbb{Z}}Q.
\end{align}
$\Omega_{\mathbb{Z},X}^{\bullet}$ 
を tropical $p$-form のなす
全複体とする(cf. \cite[Proposition 3.1]{smacka2017differential})。
$\Omega_{\mathbb{Z},X}^{\bullet}$ は自明かつ
graded-commutative な dga のなす層
であるため、その hypercohomology 
$\mathbb{H}^{\bullet}(X;\Omega_{\mathbb{Z},X}^{\bullet})$
には
graded-commutative な環構造が自然に誘導される
(例えば \cite[Remark 21.130]{gortzwedhorn2023})。 
なお、$\Omega_{\mathbb{Z},X}^{\bullet}$ は自明であるため、
アーベル群として
$\mathbb{H}^{\bullet}(X;\Omega_{\mathbb{Z},X}^{\bullet})
\simeq \bigoplus_{p,q\in \mathbb{Z}}
H^{p,q}(X;\mathbb{Z})$ となる。
また$f\colon X\to Y$ を有理多面空間の間の射とすると
これは自然な環準同型射 
$\mathbb{H}^{\bullet}(Y;\Omega_{\mathbb{Z},Y}^{\bullet})
\to \mathbb{H}^{\bullet}(X;\Omega_{\mathbb{Z},X}^{\bullet})$
が誘導される\cite[Proposition 4.18]{MR4637248}。
また、$f\colon X\to Y$ が固有射であるとき、
tropical Borel--Moore ホモロジーの押し出し
$f_*\colon H^{\opn{BM}}_{p,q}(X;Q)\to 
H^{\opn{BM}}_{p,q}(Y;Q)$ が誘導される。

$Z_k(X)$ を $X$ 上のトロピカル $k$-サイクルの
なす群とする\cite[Definition 3.5]{MR4637248}。
$X$の開集合に対して$Z_k(U)$を値に持つ前層は層をなし、
これを$\mathscr{Z}_k^{X}$と書く
\cite[p.591]{MR4637248}。
各 $k\in \mathbb{Z}_{\geq 0}$ に対してサイクル写像
$\opn{cyc}_X \colon Z_k(X)\to 
H^{\mathrm{BM}}_{k,k}(X;\mathbb{Z})$
が存在し、固有射の押し出しに関して可換である
\cite[Definition 5.4 and Corollary 5.8]{MR4637248}。

有理多面空間
$(X,\mathcal{O}_X^{\times})$ が、
基本類を許す
(admits a fundamental class)
とは、$X$ が純次元的であり、
$X_{\opn{reg}}$ 
上の$1$を値にもつ定数関数が
$Z_{\dim X}(X)$ の元を定義することである
\cite[\textsection 6.1]{MR4637248}。



$(X,\mathcal{O}_X^{\times})$ 
を基本類を許す $n$ 次元有理多面空間とする。
このとき、$[X]\deq \opn{cyc}_X(1_{X_{\opn{reg}}})
\in H^{n,n}(X;\mathbb{Z})$ を $X$ の基本類と呼ぶ
(cf. \cite[Definition 4.8]{MR3894860})。定義より、
$H_{n,n}^{\mathrm{BM}}
(X;\mathbb{Z})\deq \opn{Hom}_{D^{b}(\mathbb{Z}_X)}
(\Omega_{X}^{n}[n],\upomega_{X}^{\bullet})$
なので、$\Omega_X^{\bullet}$ の乗法構造と
基本類から次の射が誘導される。
\begin{align}
\eta_{p}^{X}\colon \Omega_X^{n-p}[n]\otimes^{L}_{\mathbb{Z}_X}
\Omega_X^{p} \to \Omega_X^{n}[n] \xto{[X]}
\upomega_X^{\bullet}. 	
\end{align}
これの tensor-hom 随伴をとることで次の射が誘導される
\cite[p.627]{MR4637248}:
\begin{align}
\delta_p^{X}\colon \Omega_X^{n-p}[n]\to 
\mathcal{D}_{\mathbb{Z}_X}(\Omega_X^{p})
\deq R\mathcal{H}om_{\mathbb{Z}_X}(\Omega_X^{p},
\upomega_X^{\bullet}).
\end{align}
定義より、$\delta_0^{X}=[X]$ である。

また、
$\opn{Hom}_{D^{b}(\mathbb{Z}_X)}(- 
\otimes^{L}_{\mathbb{Z}_X} \Omega_X^{p}[q],
\upomega_X^{\bullet})$ から
$\opn{Hom}_{D^{b}(\mathbb{Z}_X)}(-,
\mathcal{D}_{\mathbb{Z}_X}(\Omega_X^{p}[q]))$
への自然同型を
$\alpha \colon \mathbb{Z}_X\to \Omega_X^{n-p}[n-q]$
に対して適用することで次の可換図式を得る。
\[\begin{tikzcd}
{\opn{Hom}_{D^{b}(\mathbb{Z}_X)}(\Omega_X^{n-p}[n-q]
\otimes^{L}_{\mathbb{Z}_X} \Omega_X^{p}[q]
,\upomega_X^{\bullet})} & 
{\opn{Hom}_{D^{b}(\mathbb{Z}_X)}
(\Omega_X^{n-p}[n-q],\mathcal{D}_{\mathbb{Z}_X}(\Omega_X^{p}[q]))} \\
{\opn{Hom}_{D^{b}(\mathbb{Z}_X)}(\Omega^{p}[q],
\upomega_X^{\bullet})} & {\opn{Hom}_{D^{b}(\mathbb{Z}_X)}(\mathbb{Z}_X,\mathcal{D}_{\mathbb{Z}_X}(\Omega^{p}[q]))}
	\arrow[from=1-2, to=2-2]
	\arrow[from=2-1, to=2-2]
	\arrow[from=1-1, to=1-2]
	\arrow[from=1-1, to=2-1]
\end{tikzcd}\]
なお、各行の射は自然な同型である。
とくに、左上から左下への射の $\eta^X_{p}$ の像は、
$\alpha\frown [X]$ のことである。
よって、$\delta_p^{X}$ が誘導する準同型
\begin{align}
\mathbb{H}^{-q}(\delta_p^{X})
\colon H^{n-p,n-q}(X;\mathbb{Z})
\to \mathbb{H}^{-q}(X;\mathcal{D}_{\mathbb{Z}_X}
(\Omega_X^{p})) \notag
\end{align}
は、基本類によるカップ積
\cite[\textsection 4.6]{MR4246795}
\begin{align}
\label{equation-PD-map}
\cdot \frown [X]
\colon H^{n-p,n-q}(X;\mathbb{Z})
\to
H^{\mathrm{BM}}_{p,q}(X;\mathbb{Z})
\end{align}
と同一視することができる。
(なお、視認性のため、\cite[\textsection 4.6]{MR4246795}
と作用を逆にしている。)
特に $X$ がコンパクトならば、
一点空間への写像
$a_X\colon X\to \{\mathrm{pt}\}$
による写像によってトレース写像
$\int_X c\deq a_{X*}(c\frown [X])\in 
H_{0,0}^{\mathrm{BM}}(X;\mathbb{Z})\simeq \mathbb{Z}$
が定義される。

任意の $p\in \mathbb{Z}_{\geq 0}$ に対して
$\delta_{p}^{X}$ が同型射であるとき,
$(X,\mathcal{O}_X^{\times})$ は
\emph{Poincar\'e--Verdier duality}
を満たすと呼ぶ \cite[Definition 6.4]{MR4637248}。
有理多面空間が Poincar\'e--Verdier duality を満たすとき、
\cref{equation-PD-map} は同型射となる。
なお、$X$ が global な面構造を持つ場合の、
基本類のカップ積による上述の同型は、
\cite[Theorem 5.3]{MR3894860} にて初めて示された。


トロピカル多様体が
Poincar\'e--Verdier duality を満たすことは、
Bergman fan に対する Poincar\'e duality
\cite[Proposition 5.5]{MR3894860} と
\cite[Theorem 6.7]{MR4637248}
より分かる。
$(X,\mathcal{O}_X^{\times})$ を
Poincar\'e--Verdier duality を満たす有理多面空間
としたとき、
カップ積
$\cdot \frown [X]$
の逆準同型を $\opn{PD}_X$ とし、
$Z\in H^{\mathrm{BM}}_{p,q}(X;\mathbb{Z})$
に対して、$\PD{Z}\deq \opn{PD}_X(Z)$ とする。



有理多面空間 $(X,\mathcal{O}_X^{\times})$ について次の
よく知られた層の短完全列が存在する。
\begin{align}
0\to \mathbb{R}_X \to 
\mathcal{O}_X^{\times} \to \Omega_{\mathbb{Z},X}^{1}\to 0
\end{align}
これより、接続準同型
$\phi \colon H^{1,1}(X;\mathbb{Z})
\to H^{0,2}(X;\mathbb{R})$ が定義される。
$\phi$ の双対概念として
eigenwave homomorphism
$\hat{\phi} \colon
H_{n-1,n-1}^{\mathrm{BM}}(X;\mathbb{Z})
\to H_{n,n-2}^{\mathrm{BM}}(X;\mathbb{R})$
が存在する \cite[(5.2)]{MR3330789}
(\cite[Definition 2.9]{MR3894860} も見よ)。
実際に両者は、Poincar\'e 双対で整合的である
\cite[Lemma 5.13]{MR3894860}。

\subsection{トロピカル Cartier 因子}

$(X,\mathcal{O}_X^{\times})$ を有理多面空間
とし、$\opn{PAff}_{\mathbb{Z},X}$ を
$X$ 上の$\mathbb{Z}$ 係数の傾きをもつ区分
整アフィンな関数のなす層とする
(\cite[Definition 4.1]{MR3894860}
や\cite[Definition 3.8 and Remark
3.9]{MR4246795}を見よ)。
定義より次の層完全列が存在する:
\begin{align}
\label{equation-divisor-exact}
0 \to  \mathcal{O}_X^{\times} 
\to \opn{PAff}_{\mathbb{Z},X} \to 
\opn{PAff}_{\mathbb{Z},X}/\mathcal{O}_X^{\times}
\to 0.
\end{align}
また、次のように記号を置く。
\begin{align}
\opn{Div}(X)^{[0]}\deq H^{0}(X;
\opn{PAff}_{\mathbb{Z},X}/\mathcal{O}_X^{\times}), 
\quad \mathcal{D}iv_X^{[0]}\deq \opn{PAff}_{\mathbb{Z},X}/\mathcal{O}_X^{\times}
\end{align}
\cite[Lemma 4.5]{MR3894860} より、
\eqref{equation-divisor-exact} から誘導される
接続準同型
$\delta \colon \opn{Div}(X)^{[0]}\to 
H^{1}(X;\mathcal{O}_X^{\times})$ は全射である
\cite[Proposition 4.6]{MR3894860}。
以降、$D\in \opn{Div}(X)^{[0]}$ に対して
$\mathcal{L}(D)$ を $D$ が定義する
トロピカル直線束とする。

\begin{remark}
トロピカル多様体上の有理関数の定義は、著者によって
異なる。とくにそれに応じて、
トロピカル多様体上の Cartier 因子の定義も異なってくる。
例えば、\cite{MR3894860,MR4637248}
では、前述の $\opn{Div}(X)^{[0]}$ を
トロピカル多様体上の Cartier 因子のなす群と呼んでいるが、
これは \cite{demedrano2023chern} らの意味とは異なる。
任意のトロピカル多様体の余次元 $1$ のトロピカルサイクルは、
\cite{shaw2015tropical,demedrano2023chern}
などの意味でのトロピカル Cartier 因子による表現を持つ
\cite[Proposition 3.27]{shaw2015tropical}。一方で、
$\opn{Div}(X)^{[0]}$ の元の台が、
すべてのトロピカルサイクルの台を表現するとは限らない。
実際に、$X\deq \mathbb{T}$ としたとき、$\{-\infty\}$
は、\cite{MR3894860,MR4637248} の意味での
Cartier 因子の台にはならない。
この観点から考えると \cite{demedrano2023chern} などの
意味での Cartier 因子の方が、
代数多様体上の Cartier 因子の類似としては適当である。
一方で、\cite{MR3894860,MR4637248} らの意味の Cartier 
因子の定義にもご利益が存在する。その中の一つが、
有理多面空間の射 $f\colon X\to Y$ は、引き戻し
$f^{*}\colon \opn{Div}(Y)^{[0]} \to \opn{Div}(X)^{[0]}$
が常に存在し、有理多面空間の Picard 群の
引き戻しと整合的な点である
\cite[Propoisition 3.15]{MR4637248}。
\end{remark}

また、\cite{MR2591823} の理論をもとに
次のようなペアリングが存在する
\cite[\textsection 3.4]{MR4637248}。
\begin{align}
\label{equation-divisor-pairing}
\opn{Div}(X)^{[0]}\times Z_{k}(X)\to Z_{k-1}(X);
(D,A) \mapsto D\cdot A
\end{align}

とくに次のような等式が成り立つ
\cite[Proposition 5.12]{MR4637248}。
(\cite[Theorem 4.15]{MR3894860}もみよ。)
\begin{align}
\opn{cyc}_X(D\cdot A)=c_1(\mathcal{L}(D))
\frown \opn{cyc}_X(A).
\end{align}

$A$ を $X$ のトロピカル $k$-サイクルとし、
$i\colon |A|\to X$ を $A$ の台の包含写像とする
\cite[Definition 3.5]{MR4637248}。
このとき、$A$は、$Z_k(|A|)$の元と自然とみなせ
定義より射影公式
\begin{align}
i_*(D|_{|A|}\cdot A)=D\cdot A
\end{align}
が自明に成り立っていることに注意する。





\begin{proposition}
$X$ をトロピカル多様体とする。このとき、
\begin{align}
\opn{div}_X\colon
\opn{Div}(X)^{[0]}\to Z_{n-1}(X); D\mapsto D\cdot X    
\end{align}
は単射である。
\end{proposition}
\begin{proof}
ペアリングの定義が局所的なので
次の層の射が誘導される。
\begin{align}
\opn{div}_X\colon \mathcal{D}iv_X^{[0]}\to 
\mathscr{Z}_{n-1}^{X}
\end{align}
よって、この層の射が単射であることを示せばよい。
$\mathcal{B}$ を $X$ の開基とすると、
$\mathcal{B}$ 上の層のなす圏
(\cite[p.49-50]{MR2675155})
は、$X$ 上の層のなす圏と
圏同値なので、任意の開基の元 $U$ について射
$\mathcal{D}iv_X(U)\to Z_{n-1}(U)$
が単射であることを示せばよい。
$X$ はトロピカル多様体であるため、
$U$ を 
$\opn{LC}_x X\times \underline{\mathbb{R}}^{n}$
の開集合と仮定してよい。ここで、
$(\Omega_{\mathbb{Z},X}^{1})_{x}
\simeq \opn{Hom}_{\mathbb{Z}}
(T^{\mathbb{Z}}_0 (\opn{LC}_x X),\mathbb{Z})$
なので、$\mathbb{Z}$-piecewise affine 関数
$f\colon U\to \mathbb{R}$ は、
$\opn{LC}_x X$ 上の$\mathbb{Z}$-piecewise affine 関数の
$\opn{LC}_x X\times \underline{\mathbb{R}}^{n}$の
引き戻しとして得られると考えられる。
$X$ が boundaryless なとき、より一般の結果が
\cite[Theorem 4.5]{MR4246795} にて示されているので、
これより示された。
\end{proof}

以降より、$X$ がトロピカル多様体
(より一般に、regular at infinity な有理多面空間)
のとき、$\opn{Div}(X)^{[0]}$ を 
$Z_{n-1}(X)$ の部分群とみなす。
$D$ が $X$ の sedentarity-0 な部分トロピカル多様体
ならば、$\opn{Div}(X)^{[0]}$ に含まれる。


\begin{proposition}
$X$ を \cite{demedrano2023chern} の意味での
トロピカル多様体としてのアトラスを持つ有理多面空間とし、
$D,D'\in \opn{Div}^{[0]}(X)$ とする。
このとき、$D$ と $D'$ の
\cite[\textsection 2.4]{demedrano2023chern} の
意味での交叉 $D*D'$ と 
\cite[\textsection 3.4]{MR4637248}
の意味での交叉$D\cdot D'$は一致する。
\end{proposition}
\begin{proof}
\label{proposition-two-pairings}
両者の定義は共に局所的である。
よって、任意のチャートに対して示せばよい。
任意の点 $x\in X$ に対して $x$ を含むチャート
$ \psi_x
\colon U_x \to 
\opn{LC}_x X\times \mathbb{T}^{\opn{sed}_X(x)}$
で、$\psi_x(x)=(0,-\infty)\in \opn{LC}_x X\times \mathbb{T}^{\opn{sed}_X(x)}$
となるものが取れる。
また $U_x$ は、$0\in \opn{LC}_x X$ の可縮な開近傍
$V_x$ と $\mathbb{T}^{\opn{sed}_X(x)}$ の可縮な開近傍
$W_x$ の直積 $V_x\times W_x$ に置き換えてもよい。
さらに、$\opn{Div}^{[0]}(X)$ の定義から
$D|_{V_x\times W_x}$ は 
$B_x\cap \opn{LC}_x X=V_x$ となる
$T_x X$ の開集合上の
$\mathbb{Z}$PL 関数の$V_x$への制限の
主因子 $\opn{div}_{V_x}(f|_{V_x})$ と
$W_x$の直積と仮定してもよい。
よって、両者の因子とサイクルの交叉は、$x$ の近傍では
$V_x$ 上の主因子同士の交叉と $W_x$ の直積とみなせる。
よって、$\opn{sed}_X(x)=0$ の場合に示せば十分である。
以降より $\opn{sed}_X(x)=0$ とする。
また、$i \colon V_x\to B_x$ を包含写像とすると
$V_x$ 上の因子 $D_0$ に対して
\begin{align}
i_*((f|_{V_x})\cdot D_0)=(f)\cdot i_*D_0
\in Z_{n-2}(B_x)
\end{align}
が成り立つ。$B_x$ は、ある実ベクトル空間の開集合であるため、
\cite[\textsection 3.4]{MR4637248}の
ペアリングは、実ベクトル空間上の
\cite{MR2591823} によるトロピカルサイクルの
ペアリングによって決定される。
\cite[\textsection 2.4]{demedrano2023chern}
の意味でのペアリングでも同様の議論が成り立ち、
\cite[Proposition 2.1.9]{shaw2011tropical}
より、やはり$\mathbb{R}^n$
上のトロピカルサイクルの安定交叉
\cite[Definition 4.4]{MR2275625} 
の場合に帰着される。
\cite[\textsection 2]{MR3032930} でも言及されている
ように $\mathbb{R}^n$ 上のトロピカルサイクルの
\cite{MR2591823} の意味での交叉と
\cite{MR2149011,MR2275625} の意味での交叉が一致する
ことは
\cite{MR3529085} や \cite{MR2887109} で示されている。
\end{proof}


最後に
古典的な代数曲面の交点数の異なる定義
の一致をトロピカル曲面の場合で見る。





\begin{proposition}
\label{proposition-cycle-chern}
$X$ をコンパクトトロピカル曲面とし、$D_1,D_2$
をトロピカル $1$-サイクルとする。このとき、
次が成り立つ。
\begin{align}
\label{equation-two-intersections}
D_1 . D_2=\int_X \PD{D_1}\cdot \PD{D_2}.
\end{align}
ここで左辺は、
\cite{shaw2015tropical}
の意味での交点数である。
\end{proposition}
\begin{proof}
$i=1,2$ とする。
このとき、トロピカル $1$-サイクルは、
\cite[Definition 4.2]{MR3330789} の意味での
straight tropical $1$-cycle をなし、
この straight tropical $1$-cycle を
$H_{1,1}^{\mathrm{BM}}(X;\mathbb{Z})$
へと移す写像は、\cite{MR3894860} や
\cite{MR4637248} の意味でのサイクル写像と
整合的である \cite[Theorem 5.13]{MR4637248}。
さらに wave homomorphism 
$\hat{\phi}\colon 
H^{\mathrm{BM}}_{1,1}(X;\mathbb{Z})
\to H^{\mathrm{BM}}_{2,0}(X;\mathbb{R})$ に対して
$[D_i]\deq \opn{cyc}_X(D_i)\in \opn{Ker} \hat{\phi}$
である \cite[Theorem 5.4]{MR3330789}。
そのため、\cite[Lemma 5.13]{MR3894860}より
$c_1(\mathcal{L}(D'_i))=\PD{D_i}$、つまり
$c_1(\mathcal{L}(D'_i))\frown [X]=[D_i]$ となる
因子 $D'_i\in \opn{Div}^{[0]}(X)$ を選ぶことができる。
\cite[Proposition 5.12]{MR4637248}より、
$[D_i']=c_1(\mathcal{L}(D'_i))\frown [X]=[D_i]\in 
H_{1,1}^{\mathrm{BM}}(X;\mathbb{Z})$ 
となる。
このとき、
\cite[Proposition 3.34]{shaw2015tropical} と基本事実より
次の等式がそれぞれ成り立つ:
\begin{align}
D_1.D_2=D_1'.D_2', \quad 
\int_X \PD{D_1}\cdot \PD{D_2}
=\int_X \PD{D_1'}\cdot \PD{D_2'}.
\end{align}

よって、$D_1,D_2$ はともに$\opn{Div}(X)^{[0]}$ に属している
と仮定してよい。
また、トレース写像の定義と
\cite[Proposition 5.12]{MR4637248}と射影公式より、
\begin{align}
\int_X \PD{D_1}\cdot \PD{D_2}
&=a_{X*}(c_1(\mathcal{L}(D_1))\frown [D_2])
=a_{X*}(\opn{cyc}_X(D_1\cdot D_2)).
\end{align}

\cite{shaw2015tropical} における
$X$内のトロピカル
$1$-サイクルの交点数の定義は
\cite{shaw2011tropical} のものと異なるが
\cite[Theorem 3.1.7]{shaw2011tropical}
より一致する。また、
\cite[\textsection 2.4]{demedrano2023chern}
の sedentarity-$0$ の因子の
トロピカルサイクルとの交叉は \cite{shaw2011tropical}
をもとに定義されているため
\cite{demedrano2023chern} と
\cite{shaw2015tropical} は互いに整合的である。
\cref{proposition-two-pairings} より、
$D_1,D_2\in \opn{Div}^{[0]}(X)$ の
\cite{demedrano2023chern} による交叉と
\cite{MR4637248} による交叉は一致しているため、
\cite{equation-two-intersections} が示される。
\end{proof}


\subsection{トロピカル多様体の Chern 類と Todd 類}

なお、代数多様体の Chern 類と Todd 類の内容は
\cite{MR1335917,MR1644323,MR2810322} を参考にした。

\cite[Definition 5.4]{MR4637248}。
(\cite[Definition 4.13]{MR3894860}もみよ。)


\begin{notation}
$X$ を純 $n$ 次元トロピカル多様体としたとき、
$X$ の 第 $k$ Chern 類を次のように書く。 
\begin{align}
c_{k}^{\mathrm{sm}}(X)\deq
\opn{PD}_X\circ \opn{cyc}_{n-k}(\opn{csm}_{n-k}(X))
\in H^{k,k}(X;\mathbb{Z})
\end{align}
なお、$c_{k}^{\mathrm{sm}}(X)$と書いたのは、
因子類の Chern 類との混同を避けるためである。
同様に$X$の全 Chern 類を
$c^{\mathrm{sm}}(X)=\sum_{k=0}^{n} c_{k}^{\mathrm{sm}}(X)$
とする。
また $L\in H^{1,1}(X;\mathbb{Z})$ に対して、
Chern 指標を次のように書く。
\begin{align}
\opn{ch}(L)\deq \opn{exp}(L)
\deq \sum_{i=0}^{\infty}\frac{L^{i}}{i!}\in 
H^{\bullet,\bullet}(X;\mathbb{Q}).
\end{align}
\end{notation}

複素多様体 $X$ の接束を$\mathcal{T}_X$とすると、
非特異因子 $D$ に対して、次の層短完全列が存在する。
\begin{align}
0 \to \mathcal{T}_{D}\to \iota^{*}\mathcal{T}_X
\to \mathcal{N}_{D/X}\to 0
\end{align}
ここで、$\mathcal{N}_{D/X}\simeq \iota^{*}\mathcal{O}_X(D)$
であるため、次の全 Chern 類の同伴公式が成り立つ。
\begin{align}
\label{equation-classical-total-adjunction}
\iota^{*}c(\mathcal{T}_X)
=c(\mathcal{T}_{D})c(\iota^{*}\mathcal{O}_X(D))
\end{align}
$c(\mathcal{O}_X(D))=1+c_1(\mathcal{O}_X(D))$ なので
次数部分に着目すれば、$k\in \mathbb{Z}_{\geq 0}$
に対して
\begin{align}
\label{equation-classical-total-adjunction}
\iota^{*}c_k(\mathcal{T}_X)
=c_{k}(\mathcal{T}_{D})+
c_{k-1}(\mathcal{T}_{D})c_1(\iota^{*}\mathcal{O}_X(D))
\end{align}
である。
なお、Chern 類は、Chow 群の元としても定義でき、同様の
同伴公式が成立する。
\eqref{equation-classical-total-adjunction}の
トロピカル幾何的類似は考察でき、次の予想が期待できる。
\begin{conjecture}
\label{conjecture-grr-divisor}
$X$をトロピカル多様体とし、$D$ を余次元$1$の
部分トロピカル多様体とする。このとき、
$k\in \mathbb{Z}_{\geq 0}$ と包含写像
$\iota\colon D \to X$ に対して次が成り立つ。
\begin{align}
\label{equation-total-adjunction}
\iota^{*}c^{\mathrm{sm}}(X)&=c^{\mathrm{sm}}(D)
(1+\iota^{*}\PD{D}), \\ 
\iota^{*}c^{\mathrm{sm}}_k(X)&=c^{\mathrm{sm}}_k(D)+
c^{\mathrm{sm}}_{k-1}(D)\iota^{*}\PD{D}(\in H^{k,k}(D;\mathbb{Z})).
\end{align}
\end{conjecture}
\cref{conjecture-grr-divisor}では、簡単のために
トロピカルコホモロジーの元に対するものとしたが、
トロピカル Chow 群版も同様に期待できる。
トロピカル Chow 群の定義は
\cite[Definition 3.30]{shaw2015tropical} を見よ。
$\dim X=1,2$ のとき、
\cref{conjecture-grr-divisor}
は正しい。$\dim X=1$のときは、
明らかである。
$\dim X=2$のときは、
トロピカル曲面内の
部分トロピカル曲線の
同伴公式の別表現に過ぎない
\cite[Theorem 6]{shaw2015tropical}。
\cref{conjecture-grr-divisor} 
が正しいならば、
どのような結論を導くのかは後で見ていく。

これよりトロピカル多様体の Todd 類について議論する。
古典的には、複素多様体 $M$ 上の偶コホモロジー環
$H^{\mathrm{even}}(M;\mathbb{Q})$
と接束 $TM$の全 Chern 類 
$c(TM)\deq \sum_{i=0}^{\infty}c_i(TM)\in 
H^{\mathrm{even}}(X;\mathbb{Q})$
に対して
Todd $m$-列 $(\opn{Todd}_j)_{j\in \mathbb{Z}_{\geq 0}}$
を適用させることで $M$ の Todd 類
$\opn{td}(M)$
が定義されるのであった
\cite[\textsection 10]{MR1335917}。
 
トロピカル多様体 $X$ の Todd 類は
$H^{\mathrm{even}}(M;\mathbb{Q})$ を
$\bigoplus_{i=0}^{\infty} H^{i,i}(X;\mathbb{Q})$
に置き換えるだけで同様に定義することができる
(\cref{definition-tropical-todd})。

\cite[Conjecture 6.13]{demedrano2023chern} では Todd 類はサイクルとして
定義しているが、本論文では代数幾何でよく用いられる形に
近づけるためにそれの Poincar\'e 双対を取ることとする。

\begin{definition}[{\cite[\textsection 6]{demedrano2023chern}}]
\label{definition-tropical-todd}
$X$をトロピカル多様体とする。
第 $j$ 次 Todd 類を
$\bigoplus_{i=0}^{\infty} H^{i,i}(X;\mathbb{Q})$に
関する Todd $m$-列 $\opn{Todd}\deq (\opn{Todd}_j)_{j\in \mathbb{Z}_{\geq 0}}$
に対して
$X$ の全 Chern 類
$c^{\mathrm{sm}}(X)$を代入することで得られるものとする。
\begin{align}
\opn{td}_j(X)\deq \opn{Todd}_j(c_{1}^{\mathrm{sm}}(X),
\ldots,c_{j}^{\mathrm{sm}}(X)),
\end{align}
\begin{align}
\opn{td}(X)\deq \sum_{j=0}^{\infty}\opn{td}_j(X)=
\opn{Todd}(c^{\mathrm{sm}}(X)).
\end{align}

\end{definition}



\begin{definition}
\label{definition-rr-number}
$X$ を純$n$次元
コンパクトトロピカル多様体とし、$D\in Z_{n-1}(X)$
とする。このとき、
$D$ の Riemann--Roch 数を次のようにする。
\begin{align}
\opn{RR}(X;D)\deq \int_X \opn{ch}(\PD{D})\opn{td}(X).
\end{align}
\end{definition}
$D\in \opn{Div}(X)^{[0]}$ のとき、
\cite[Proposition 5.12]{MR4637248} より
\cref{definition-rr-number} は
\cref{equation-intro-rr} のようにも書ける。

次に、古典の場合に従い
一般化された Gysin 押し出し(generalized Gysin map)
を定義する(e.g. 
\cite[Chapter 13. Appendix]{MR2810322})。
(なお、トロピカル多様体における
一般化された Gysin 押し出しは
\cite[Proposition 8.3]{amini2020hodge} でもすでに用いられている。)
\begin{definition}
$X,Y$ を pure なトロピカル多様体とし、
$Q$を$\mathbb{R}$の部分環とする。
$f\colon X\to Y$ を固有射とする。
$f$ の \emph{generalized Gysin map} とは、
次の射が可換となる射
$f_!\colon H^{\bullet,\bullet}(X;Q)\to 
H^{\bullet,\bullet}(Y;Q)$
のことである。
\begin{equation}
\begin{tikzcd}
	{H^{\bullet,\bullet}(X;Q)} & {H^{\bullet,\bullet}(Y;Q)} \\
	{H_{\bullet,\bullet}^{\mathrm{BM}}(X;Q)} & {H_{\bullet,\bullet}^{\mathrm{BM}}(Y;Q)}
	\arrow["{\cdot \frown [X]}"', from=1-1, to=2-1]
	\arrow["{\cdot\frown[Y]}", from=1-2, to=2-2]
	\arrow["{f_*}"', from=2-1, to=2-2]
	\arrow["{f_!}", from=1-1, to=1-2]
\end{tikzcd}    
\end{equation}

\end{definition}
定義より、次の射影公式が成り立つ。
\begin{proposition}[{射影公式}]
$X,Y$ を pure なトロピカル多様体とし、
$f\colon X\to Y$ を固有射とする。
このとき、$c\in H^{\bullet,\bullet}(Y;Q) $
$d\in H^{\bullet,\bullet}(X;Q)$
に対して、次が成り立つ。
\begin{align}
    f_!(f^{*}(c)\cdot d)=c\cdot f_!(d).
\end{align}
とくに、$f_!(f^{*}(c))=c\cdot f_!(1)$ が成り立つ。
\end{proposition}

\begin{proof}
$\cdot \frown [Y]$ は同型射なので、次の等式を
示せばよい。
\begin{align}
    f_!(f^{*}(c)\cdot d)\frown [Y]=(c\cdot f_!(d))\frown [Y]
\end{align}
実際に、Borel--Morre ホモロジーについての射影公式より
次のように式変形することで得られる:
\begin{align}
(c\cdot f_!(d))\frown [Y]&=
c\frown(f_!(d)\frown [Y])=
c\frown f_*(d\frown [X])\\
&=f_*(f^*(c)\frown (d\frown [X]))
=f_*((f^*(c)\cdot d) \frown [X]) \\
&=f_!(f^{*}(c)\cdot d)\frown [Y].
\end{align}
\end{proof}

\begin{example}
     
$X$ をトロピカル多様体とし $D$ を余次元 $1$ の
部分トロピカル多様体とする。
\cref{conjecture-grr-divisor} が正しいと仮定すると、
包含写像
$\iota\colon D\to X$ に関する
Gysin 押し出しと射影公式から
\begin{align}
c^{\mathrm{sm}}(X)\cdot \PD{D}=\iota_!c^{\mathrm{sm}}(D)
(1+\PD{D}).
\end{align}

この等式の第 $1$ 次数部分は、
\begin{align}
\label{equation-adjunction-dmrs}
c^{\mathrm{sm}}_{1}(X)\cdot \PD{D}=\iota_!c^{\mathrm{sm}}_1(D)
+\PD{D}\cdot \PD{D}.
\end{align}
これは、
\cite[Theorem 5.2]{demedrano2023chern}にて示された
同伴公式のサイクル写像による像の
Poincar\'e dual である。
\eqref{equation-adjunction-dmrs} を標準束で書き直すと
\begin{align}
\iota_! \PD{K_D}=(\PD{K_X}+\PD{D})\PD{D}.
\end{align}
$\dim X=2$ のとき、$H^{1,1}(X;\mathbb{Z})\simeq \mathbb{Z}$
なのでこの等式も
\cite[Theorem 4.11]{shaw2015tropical} にて示された
随伴公式を与える。
\end{example}

\begin{example}
再び
$X$ をトロピカル多様体とし $D$ を余次元 $1$ の
部分トロピカル多様体とする。
\eqref{equation-total-adjunction}と
Todd類の乗法列としての性質より
\begin{align}
\iota^{*}\opn{td}(X)=
\opn{td}(D)\frac{\iota^{*}\PD{D}}
{1-\opn{exp}(\iota^{*}\PD{D})}.
\end{align}
これを式変形すると次のようになる。
\begin{align}
\opn{td}(D)
=\iota^{*}\left(
\frac{1-\opn{exp}(\PD{D})}{
\PD{D}}\opn{td}(X)\right).
\end{align}
また、これに射影公式
を当てはめると
\begin{align}
\label{equation-grr-divisor-2}
\iota_!(\opn{td}(D))=(1-\opn{ch}(\PD{D}))\opn{td}(X).
\end{align}
\eqref{equation-grr-divisor-2} は、
Grothendieck--Riemann--Roch の定理の特殊例
のトロピカル類似である。
\end{example}

\begin{proposition}
\label{proposition-euler-to-bertini}
\cite[Conjecture 6.13]{demedrano2023chern},
\cref{conjecture-grr-divisor,conjecture-rr-euler}
が正しいなら、\cref{conjecture-rr-bertini}も正しい。  
\end{proposition}

\begin{proof}
\cref{conjecture-grr-divisor} が正しいと仮定すると
埋め込み $\iota\colon D\to X$ に対する
射影公式より
\begin{align}
\iota_!(\opn{ch}(\iota^{*}(\PD{D'}))\opn{td}(D))
&=\opn{ch}(\PD{D'})\iota_!(\opn{td}(D)) \notag \\
&=(\opn{ch}(\PD{D'})-\opn{ch}(\PD{D'-D}))\opn{td}(X).
\end{align}

仮定より $D'$ は sedentarity-$0$ なので、
因子としての引き戻し$\iota^{*}D'=D'|_{D}$が存在するため
次が成り立つ。
\begin{align}
\label{equation-rr-number-divisor}
\opn{RR}(X;D'-D)=\opn{RR}(X;D')-
\opn{RR}(D;D'|_{D}).
\end{align}

\cref{conjecture-rr-euler} と
\cite[Conjecture 6.13]{demedrano2023chern} が
正しいならば、
\begin{align}
\opn{RR}(X;D')-
\opn{RR}(D;D'|_{D})=
\chi(X\setminus D')-\chi(D\setminus (D'\cap D)) \notag
\end{align}
となる。よって示せた。
\end{proof}

\begin{example}
\cref{conjecture-rr-euler} と
\cref{conjecture-grr-divisor} が正しいならば、
\cref{conjecture-rr-c-euler} は正しい。
\end{example}

以上を踏まえて、\cref{theorem-rr-euler-surface}
を一般化する。

\begin{theorem}
\label{theorem-rr-bertini-surface}
$X$を
コンパクトトロピカル曲面とし、$D$ と $D'$が余次元$1$
のトロピカル部分多様体とする。このとき、次が成り立つ。
\begin{align}
\chi(X\setminus D')-\chi(D\setminus (D'\cap D))
=\frac{(D'-D).(D'-D-K_X)}{2}+\chi(X).
\end{align}
特に $X$ が Delzant 面構造をもつとき、
\cref{conjecture-rr-bertini} は正しい。
\end{theorem}

\begin{proof}
$\dim X=2$なので、
\cref{conjecture-grr-divisor}は正しい。
\cref{theorem-rr-euler-surface}と
\eqref{equation-rr-number-divisor}より、
\begin{align}
\frac{(D'-D).(D'-D-K_X)}{2}=&
\opn{RR}(X;D')-\opn{RR}(X;0)-
\opn{RR}(D;D'\cap D) \\
=&\chi(X\setminus D')-\chi(X)-\chi(D\setminus (D'\cap D)).
\end{align}
\end{proof}



\begin{remark}

\cref{theorem-rr-euler-surface} 
の証明では、Euler calculus の視点から
トロピカル多様体 $X$ の余次元 $1$ のトロピカル部分多様体
$D$ の補集合の Euler 数 $\chi(X\setminus D)$ を計算するという
手法をとった。このテクニックは Bertini 対 $(D,D')$ に
対しても有効であるが、注意も必要である。

ここでは、\cite{MR1299726} に書かれている知識が必要であるため
それを整理する。
$A$ を $\mathbb{R}$ の部分環とし、$A_X$ を
$X$ 上の定数層とし、$\catn{Mod}(A_X)$ を $A_X$加群の層の
なす圏とする。
$Z$ を局所閉部分集合とし、
$j\colon Z\to X$ を包含写像とする。
$(\cdot)_{Z}\colon \catn{Mod}(A_X) \to \catn{Mod}(A_X)$
を \cite[Proposition 2.3.6]{MR1299726} で定義される完全
関手とし、
$\Gamma_{Z}\colon \catn{Mod}(A_X) \to \catn{Mod}(A_X)$
を \cite[Definition 2.3.8]{MR1299726} で定義される関手
とする。$X$ 上の層 $\mathcal{F}$ に対して、
$(\mathcal{F})_{Z}\simeq j_!j^{-1}\mathcal{F}$ である。
特に、$Z$ が開集合であるときは、
$\Gamma_{Z}\mathcal{F}\simeq
j_*j^{-1}\mathcal{F}$ である
\cite[Proposition 2.3.9 (iii)]{MR1299726}。
このとき、次の層の完全列が存在する。

\begin{align}
\label{equation-closed-open-exact}
0 \to (\mathbb{Q}_X)_{X\setminus D}
\to \mathbb{Q}_X \to (\mathbb{Q}_X)_{D} \to 0.
\end{align}

次に、導来関手 $R\Gamma_{X\setminus D'}$ を
\begin{align}
R\Gamma_{X\setminus D'}((\mathbb{Q}_X)_{X\setminus D})
\to  R\Gamma_{X\setminus D'}(\mathbb{Q}_X)
\to R\Gamma_{X\setminus D'}((\mathbb{Q}_X)_D)
\to R\Gamma_{X\setminus D'}((\mathbb{Q}_X)_{X\setminus D})[1].
\end{align}


さらに、$i\colon D\to X$ を包含写像とすると
\cite[(2.3.20)]{MR1299726} より
\begin{align}
R\Gamma_{X\setminus D'}((\mathbb{Q}_X)_D)
\simeq i_* R\Gamma_{D\setminus D'}\mathbb{Q}_D
\end{align}
となるので、次の等式が成り立つ。
\begin{align}
\chi(\mathbb{H}^{\bullet}(X;R\Gamma_{X\setminus D'}((\mathbb{Q}_X)_{X\setminus D})))
= \chi(X\setminus D')
- \chi(D\setminus (D'\cap D)).
\end{align}

なお、定義からわかるように
\begin{align}
\mathbb{H}^{\bullet}(X;R\Gamma_{X}
((\mathbb{Q}_X)_{X\setminus D}))
\simeq H^{\bullet}_c(X\setminus D), \quad
\mathbb{H}^{\bullet}(X;R\Gamma_{X\setminus D'}
((\mathbb{Q}_X)_{X}))
\simeq H^{\bullet}(X\setminus D')
\end{align}
である。
詳細は省くが、
$\mathbb{H}^{\bullet}(X;R\Gamma_{X\setminus D'}
((\mathbb{Q}_X)_{X\setminus D}))$
は \cite{tsutsui2023graded} にて定義した
コンパクトトロピカル多様体上の
permissible な $C^{\infty}$ 因子 $s$ が定義する
次数付き加群 $\opn{LMD}^{\bullet}(X;s)$
の類似物の一種であり、密接に関係している。
(簡単な場合は\cref{remark-c-infinity-divisor}
にて説明している。)



この論文では、\eqref{equation-closed-open-exact} を
\eqref{equation-anti-effective-divisor} の一種の
類似と見立てており、
導来関手 $R\Gamma_{X\setminus D'}$ を
代数多様体の非特異因子が定義する直線束のテンソル積の類似
と見立てている。
ここで注意しなければならないのは、
直線束のテンソル積とは異なり、
$(\cdot )_{X\setminus D}$
と $R\Gamma_{X\setminus D}$ は可換ではない。
実際に任意の層 $\mathcal{F}$ に対して
\begin{align}
(R\Gamma_{X\setminus D}(\mathcal{F}))_{X\setminus D}
\simeq 
\mathcal{F}_{X\setminus D}, \quad
R\Gamma_{X\setminus D}((\mathcal{F})_{X\setminus D})
\simeq R\Gamma_{X\setminus D}(\mathcal{F})
\end{align}
となる。一方で次の同型が成り立つ。
\begin{align}
R\Gamma_{X\setminus D'}
(R\Gamma_{X\setminus D}(\mathcal{F}))
\simeq R\Gamma_{X\setminus (D\cup D')}(\mathcal{F}), \quad
((\mathcal{F})_{X\setminus D})_{X\setminus D'}
\simeq (\mathcal{F})_{X\setminus (D \cup D')}
\end{align}
ゆえに、トロピカル部分多様体の Bertini 対 $(D,D')$ の定義を
トロピカル部分多様体の良い交わりをする有限和の対に弱める
ことができると期待できる。

\end{remark}

% \begin{remark}
% \label{remark-floer-differential}
% \cref{remark-c-infinity-divisor}
% を読んでいないならば、読み飛ばして問題ない。
% $(D,D')$ をコンパクトトロピカル多様体
% $X$ 上の Bertini 対としたとき、
% $\mathbb{H}^{\bullet}(X;R\Gamma_{X\setminus D'}
% ((\mathbb{Q}_X)_{X\setminus D}))$
% の Euler 数が $D'-D$ の Riemann--Roch 数の
% ように振る舞い、実際にいくつかのケースでは正しいことを
% 見てきた。しかし、$\mathbb{H}^{\bullet}(X;R\Gamma_{X\setminus D'}
% ((\mathbb{Q}_X)_{X\setminus D}))$ は必ずしも
% $D'-D$ に付随する直線束のコホモロジーのようには
% 振舞わない。これをトロピカル楕円曲線 $X\deq 
% \mathbb{R}/\mathbb{Z}$ を例にとり説明する。
% $0=a_1<b_1<\frac{1}{4}<b_2<a_2=\frac{1}{2}$ とし、
% $D'=[a_1]+[a_2]$, $D=[b_1]+[b_2]$ とする。このとき、
% $c\deq b_2+(b_1-a_1)<\frac{1}{2}$なので、
% $D_0\deq [a_1]-[b_1]-[b_2]-[c]$ は
% $\mathbb{R}/\mathbb{Z}$ 上の主因子を定義する。
% よって、$D'-D$ は $[a_2]-[c]$ と線形同値となる。
% よって $D'-D$ が線形同値であるか否かは
% $[a_2]=[c]$ であるか否かとなる。
% 代数曲線 $\mathcal{C}$ 上の因子 $\mathcal{D}$ が
% 自明か否かは
% またトロピカル曲線
% Baker--Norine rank は、
% \end{remark}

\begin{proposition}
$X$ を連結かつコンパクトな整アフィン多様体とし、
$D$ を余次元$1$のトロピカル部分多様体とする。
このとき、\cref{conjecture-grr-divisor} は正しい。
特に、$D$ について\cite[Conjecture 6.13]{demedrano2023chern}
と \cref{conjecture-rr-euler} 
が正しいとき、$X$ について \cref{conjecture-rr-bertini}
が正しい。
\end{proposition}
\begin{proof}
$\mathbb{R}^n$ 内の余次元 $1$ のトロピカル部分多様体の
局所錐は、$U_{r-1,r}\oplus U_{n-r,n-r}$ の
Bergman fan のいずれかと同型である。
これは、$U_{n,n}$ 内の余次元 $1$ のマトロイドの双対が
階数 $1$ の coloopless matroid となることからわかる。
また、$X$ は boundaryless なので、$D$
の自身への引き戻しは、自然に定義される。
Chern--Schwartz--Macpherson 類の定義は局所的なので
$X=L_{U_{n,n}}$ かつ、$D=L_{U_{n-1,n}}$ 
と仮定してよい。これについて、\cref{conjecture-grr-divisor}
は正しい。\cref{conjecture-grr-divisor} が正しいので
\cref{proposition-divisor-poincare} より
$D$ について \cite[Conjecture 6.13]{demedrano2023chern}
が正しいならば、\eqref{equation-rr-number-divisor}
より
\begin{align}
\chi(X\setminus D)=(-1)^{\dim X}\chi_c(X\setminus D)
=(-1)^{\dim X}\opn{RR}(X,-D)
=\opn{RR}(X,D)
\end{align}

つまり、$X$ についても \cref{conjecture-rr-euler}
が正しい。よって、
\cref{proposition-euler-to-bertini} より
$X$ についても \cref{conjecture-rr-bertini} は正しい。

\end{proof}



\bibliography{tropical-complement}
\bibliographystyle{amsalpha}

\end{document}